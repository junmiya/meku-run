(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2967:function(e,a,t){Promise.resolve().then(t.bind(t,6679))},6679:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return C}});var s=t(7437),n=t(2265),r=t(4362);t(5584);var i=e=>{let{mode:a,onToggleMode:t}=e,{signIn:i,signUp:l,signInWithGoogle:o,resetPassword:d,loading:c}=(0,r.a)(),[g,m]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[p,x]=(0,n.useState)(""),[j,v]=(0,n.useState)(null),[C,f]=(0,n.useState)(null),[w,b]=(0,n.useState)(!1),N=async e=>{if(e.preventDefault(),v(null),f(null),!g.trim()||!u.trim()){v("メールアドレスとパスワードを入力してください");return}if("signup"===a&&!p.trim()){v("氏名を入力してください");return}try{"signin"===a?await i(g,u):(await l(g,u,p),f("アカウントが作成されました"))}catch(e){v(T(e.message)),console.error("Auth error:",e)}},y=async e=>{if(e.preventDefault(),v(null),f(null),!g.trim()){v("メールアドレスを入力してください");return}try{await d(g),f("パスワードリセットメールを送信しました"),b(!1)}catch(e){v(T(e.message)),console.error("Reset password error:",e)}},E=async()=>{try{v(null),await o()}catch(e){v(T(e.message)),console.error("Google auth error:",e)}},T=e=>({"auth/invalid-email":"メールアドレスの形式が正しくありません","auth/user-disabled":"このアカウントは無効化されています","auth/user-not-found":"このメールアドレスのアカウントが見つかりません","auth/wrong-password":"パスワードが間違っています","auth/invalid-credential":"メールアドレスまたはパスワードが正しくありません","auth/too-many-requests":"ログイン試行回数が多すぎます。しばらく待ってから再試行してください","auth/popup-closed-by-user":"ログインがキャンセルされました","auth/weak-password":"パスワードは6文字以上で入力してください","auth/email-already-in-use":"このメールアドレスは既に使用されています",認証機能が無効になっています:"認証機能が無効になっています"})[e]||"エラー: ".concat(e);return w?(0,s.jsxs)("div",{className:"auth-form",children:[(0,s.jsx)("h2",{children:"パスワードリセット"}),(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"reset-email",children:"メールアドレス"}),(0,s.jsx)("input",{type:"email",id:"reset-email",value:g,onChange:e=>m(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),j&&(0,s.jsx)("div",{className:"error-message",children:j}),C&&(0,s.jsx)("div",{className:"success-message",children:C}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"auth-button",children:c?"リセット中...":"パスワードリセット"}),(0,s.jsx)("button",{type:"button",onClick:()=>b(!1),className:"link-button",children:"ログインに戻る"})]})]}):(0,s.jsxs)("div",{className:"auth-form",children:[(0,s.jsx)("h2",{children:"signin"===a?"ログイン":"アカウント作成"}),(0,s.jsx)("div",{className:"google-auth-section",children:(0,s.jsxs)("button",{type:"button",onClick:E,disabled:c,className:"google-signin-button",children:[(0,s.jsxs)("svg",{className:"google-icon",viewBox:"0 0 24 24",width:"20",height:"20",children:[(0,s.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Googleで","signin"===a?"ログイン":"登録"]})}),(0,s.jsx)("div",{className:"divider",children:(0,s.jsx)("span",{children:"または"})}),(0,s.jsxs)("form",{onSubmit:N,children:["signup"===a&&(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"fullName",children:"氏名"}),(0,s.jsx)("input",{type:"text",id:"fullName",value:p,onChange:e=>x(e.target.value),placeholder:"氏名を入力",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"メールアドレス"}),(0,s.jsx)("input",{type:"email",id:"email",value:g,onChange:e=>m(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"password",children:"パスワード"}),(0,s.jsx)("input",{type:"password",id:"password",value:u,onChange:e=>h(e.target.value),placeholder:"パスワードを入力（6文字以上）",minLength:6,required:!0})]}),j&&(0,s.jsx)("div",{className:"error-message",children:j}),C&&(0,s.jsx)("div",{className:"success-message",children:C}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"auth-button",children:c?"signin"===a?"ログイン中...":"アカウント作成中...":"signin"===a?"ログイン":"アカウント作成"}),(0,s.jsxs)("div",{className:"auth-links",children:["signin"===a&&(0,s.jsx)("button",{type:"button",onClick:()=>b(!0),className:"link-button",children:"パスワードを忘れた方"}),(0,s.jsx)("button",{type:"button",onClick:t,className:"link-button",children:"signin"===a?"アカウントをお持ちでない方はこちら":"既にアカウントをお持ちの方はこちら"})]})]})]})};t(968);var l=e=>{var a,t;let{onClose:i}=e,{user:l,signOut:o}=(0,r.a)(),[d,c]=(0,n.useState)(!1),g=async()=>{c(!0);try{await o()}catch(e){console.error("Sign out error:",e),c(!1)}};return l?(0,s.jsx)("div",{className:"user-profile-overlay",children:(0,s.jsxs)("div",{className:"user-profile",children:[(0,s.jsxs)("div",{className:"profile-header",children:[(0,s.jsx)("h3",{children:"プロフィール"}),(0,s.jsx)("button",{onClick:i,className:"close-button",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"profile-content",children:[(0,s.jsxs)("div",{className:"profile-info",children:[(0,s.jsx)("div",{className:"avatar",children:l.photoURL?(0,s.jsx)("img",{src:l.photoURL,alt:"Avatar"}):(0,s.jsx)("div",{className:"avatar-placeholder",children:(null===(a=l.displayName)||void 0===a?void 0:a.charAt(0))||(null===(t=l.email)||void 0===t?void 0:t.charAt(0))||"?"})}),(0,s.jsxs)("div",{className:"user-details",children:[(0,s.jsx)("p",{className:"user-name",children:l.displayName||"ユーザー"}),(0,s.jsx)("p",{className:"user-email",children:l.email})]})]}),(0,s.jsxs)("div",{className:"profile-stats",children:[(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("span",{className:"stat-label",children:"アカウント作成日"}),(0,s.jsx)("span",{className:"stat-value",children:l.metadata.creationTime?new Date(l.metadata.creationTime).toLocaleDateString("ja-JP"):"不明"})]}),(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("span",{className:"stat-label",children:"最終ログイン"}),(0,s.jsx)("span",{className:"stat-value",children:l.metadata.lastSignInTime?new Date(l.metadata.lastSignInTime).toLocaleDateString("ja-JP"):"不明"})]})]}),(0,s.jsx)("div",{className:"profile-actions",children:(0,s.jsx)("button",{onClick:g,disabled:d,className:"signout-button",children:d?"ログアウト中...":"ログアウト"})})]})]})}):null};t(7062);var o=e=>{let{size:a="medium"}=e;return(0,s.jsx)("div",{className:"loading-spinner ".concat(a),children:(0,s.jsx)("div",{className:"spinner"})})};t(7959);var d=e=>{let{card:a,onEdit:t,onDelete:r,onToggleStar:i}=e,[l,o]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:"card-container",children:[(0,s.jsxs)("div",{className:"card ".concat(l?"flipped":""),onClick:()=>{o(!l)},children:[(0,s.jsx)("div",{className:"card-face front",children:(0,s.jsxs)("div",{className:"card-content",children:[(0,s.jsx)("h3",{children:a.word}),a.tags&&a.tags.length>0&&(0,s.jsx)("div",{className:"tags",children:a.tags.map((e,a)=>(0,s.jsx)("span",{className:"tag",children:e},a))})]})}),(0,s.jsx)("div",{className:"card-face back",children:(0,s.jsx)("div",{className:"card-content",children:(0,s.jsx)("p",{children:a.meaning})})})]}),(0,s.jsxs)("div",{className:"card-actions",children:[(0,s.jsx)("button",{className:"star-btn ".concat(a.isStarred?"starred":""),onClick:e=>{e.stopPropagation(),null==i||i(a.id)},children:"★"}),(0,s.jsx)("button",{className:"edit-btn",onClick:e=>{e.stopPropagation(),null==t||t(a)},children:"編集"}),(0,s.jsx)("button",{className:"delete-btn",onClick:e=>{e.stopPropagation(),null==r||r(a.id)},children:"削除"})]})]})};t(3672);var c=e=>{let{card:a,onSave:t,onCancel:r}=e,[i,l]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[c,g]=(0,n.useState)(""),[m,u]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(a){var e;l(a.word),d(a.meaning),g((null===(e=a.tags)||void 0===e?void 0:e.join(", "))||""),u(a.isStarred||!1)}},[a]),(0,s.jsx)("div",{className:"card-form-overlay",children:(0,s.jsxs)("div",{className:"card-form",children:[(0,s.jsx)("h2",{children:a?"単語カードを編集":"新しい単語カードを作成"}),(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!i.trim()||!o.trim()){alert("単語と意味を入力してください");return}let a=c.split(",").map(e=>e.trim()).filter(e=>e.length>0);t({word:i.trim(),meaning:o.trim(),isStarred:m,...a.length>0&&{tags:a}}),l(""),d(""),g(""),u(!1)},children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"word",children:"単語"}),(0,s.jsx)("input",{type:"text",id:"word",value:i,onChange:e=>l(e.target.value),placeholder:"単語を入力",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"meaning",children:"意味"}),(0,s.jsx)("textarea",{id:"meaning",value:o,onChange:e=>d(e.target.value),placeholder:"意味を入力",rows:3,required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"tags",children:"タグ（カンマ区切り）"}),(0,s.jsx)("input",{type:"text",id:"tags",value:c,onChange:e=>g(e.target.value),placeholder:"タグ1, タグ2, タグ3"})]}),(0,s.jsx)("div",{className:"form-group checkbox-group",children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:m,onChange:e=>u(e.target.checked)}),"お気に入り"]})}),(0,s.jsxs)("div",{className:"form-actions",children:[(0,s.jsx)("button",{type:"button",onClick:r,className:"cancel-btn",children:"キャンセル"}),(0,s.jsx)("button",{type:"submit",className:"save-btn",children:a?"更新":"保存"})]})]})]})})};t(5283);var g=e=>{let{searchQuery:a,onSearchChange:t,sortBy:n,onSortByChange:r,sortOrder:i,onSortOrderChange:l,showStarredOnly:o,onShowStarredOnlyChange:d,selectedTag:c,onSelectedTagChange:g,availableTags:m,totalCards:u,filteredCards:h}=e;return(0,s.jsxs)("div",{className:"search-filter",children:[(0,s.jsx)("div",{className:"search-section",children:(0,s.jsxs)("div",{className:"search-input-container",children:[(0,s.jsx)("input",{type:"text",placeholder:"単語や意味で検索...",value:a,onChange:e=>t(e.target.value),className:"search-input"}),a&&(0,s.jsx)("button",{className:"clear-search",onClick:()=>t(""),children:"\xd7"})]})}),(0,s.jsxs)("div",{className:"filter-section",children:[(0,s.jsxs)("div",{className:"filter-group",children:[(0,s.jsx)("label",{children:"並び順:"}),(0,s.jsxs)("select",{value:n,onChange:e=>r(e.target.value),className:"filter-select",children:[(0,s.jsx)("option",{value:"createdAt",children:"作成日"}),(0,s.jsx)("option",{value:"updatedAt",children:"更新日"}),(0,s.jsx)("option",{value:"alphabetical",children:"アルファベット順"})]}),(0,s.jsx)("button",{className:"sort-order-btn ".concat("desc"===i?"desc":"asc"),onClick:()=>l("asc"===i?"desc":"asc"),title:"asc"===i?"昇順":"降順",children:"asc"===i?"↑":"↓"})]}),(0,s.jsxs)("div",{className:"filter-group",children:[(0,s.jsx)("label",{children:"タグ:"}),(0,s.jsxs)("select",{value:c,onChange:e=>g(e.target.value),className:"filter-select",children:[(0,s.jsx)("option",{value:"",children:"すべて"}),m.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsx)("div",{className:"filter-group",children:(0,s.jsxs)("label",{className:"checkbox-label",children:[(0,s.jsx)("input",{type:"checkbox",checked:o,onChange:e=>d(e.target.checked)}),"お気に入りのみ"]})})]}),(0,s.jsx)("div",{className:"filter-summary",children:h!==u&&(0,s.jsxs)("span",{className:"filter-result",children:[u,"件中",h,"件を表示"]})})]})};t(2810);var m=e=>{let{currentPage:a,totalPages:t,onPageChange:r,itemsPerPage:i,totalItems:l}=e;if(t<=1)return null;let o=Math.min(a*i,l),d=(()=>{let e=[],s=[],n=Math.max(1,a-2),r=Math.min(t,a+2);for(let a=n;a<=r;a++)e.push(a);return n>2?s.push(1,"..."):2===n&&s.push(1),s.push(...e),r<t-1?s.push("...",t):r===t-1&&s.push(t),s})();return(0,s.jsxs)("div",{className:"pagination-container",children:[(0,s.jsxs)("div",{className:"pagination-info",children:[l,"件中 ",(a-1)*i+1,"-",o,"件を表示"]}),(0,s.jsxs)("div",{className:"pagination",children:[(0,s.jsx)("button",{className:"pagination-btn",onClick:()=>r(a-1),disabled:1===a,children:"← 前へ"}),d.map((e,t)=>(0,s.jsx)(n.Fragment,{children:"..."===e?(0,s.jsx)("span",{className:"pagination-dots",children:"..."}):(0,s.jsx)("button",{className:"pagination-btn ".concat(e===a?"active":""),onClick:()=>r(e),children:e})},t)),(0,s.jsx)("button",{className:"pagination-btn",onClick:()=>r(a+1),disabled:a===t,children:"次へ →"})]})]})},u=t(5246);let h=[{word:"accomplish",meaning:"達成する、成し遂げる",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"acquire",meaning:"獲得する、身につける",tags:["動詞","ビジネス","TOEIC"]},{word:"adequate",meaning:"適切な、十分な",tags:["形容詞","ビジネス","TOEIC"]},{word:"administrator",meaning:"管理者、運営者",tags:["名詞","ビジネス","TOEIC"]},{word:"agenda",meaning:"議題、予定表",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"allocate",meaning:"割り当てる、配分する",tags:["動詞","ビジネス","TOEIC"]},{word:"annually",meaning:"年に一度、毎年",tags:["副詞","ビジネス","TOEIC"]},{word:"anticipate",meaning:"予期する、期待する",tags:["動詞","ビジネス","TOEIC"]},{word:"assessment",meaning:"評価、査定",tags:["名詞","ビジネス","TOEIC"]},{word:"authentic",meaning:"本物の、信頼できる",tags:["形容詞","ビジネス","TOEIC"]},{word:"budget",meaning:"予算、予算を組む",tags:["名詞","動詞","経済","TOEIC"],isStarred:!0},{word:"commodity",meaning:"商品、日用品",tags:["名詞","経済","TOEIC"]},{word:"comprehensive",meaning:"包括的な、総合的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"consecutive",meaning:"連続した、継続的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"corporate",meaning:"企業の、法人の",tags:["形容詞","ビジネス","TOEIC"],isStarred:!0},{word:"crucial",meaning:"極めて重要な、決定的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"deficit",meaning:"赤字、不足",tags:["名詞","経済","TOEIC"]},{word:"economical",meaning:"経済的な、節約の",tags:["形容詞","経済","TOEIC"]},{word:"eliminate",meaning:"除去する、削除する",tags:["動詞","ビジネス","TOEIC"]},{word:"estimate",meaning:"見積もる、推定する",tags:["動詞","名詞","ビジネス","TOEIC"]},{word:"implement",meaning:"実行する、実施する",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"innovative",meaning:"革新的な、斬新な",tags:["形容詞","技術","TOEIC"]},{word:"maintenance",meaning:"保守、維持管理",tags:["名詞","技術","TOEIC"]},{word:"manufacture",meaning:"製造する、製造業",tags:["動詞","名詞","製造","TOEIC"]},{word:"operational",meaning:"運営の、操作の",tags:["形容詞","ビジネス","TOEIC"]},{word:"procedure",meaning:"手順、手続き",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"productivity",meaning:"生産性、生産力",tags:["名詞","ビジネス","TOEIC"]},{word:"proposal",meaning:"提案、企画書",tags:["名詞","ビジネス","TOEIC"]},{word:"regulation",meaning:"規則、規制",tags:["名詞","ビジネス","TOEIC"]},{word:"revenue",meaning:"収入、歳入",tags:["名詞","経済","TOEIC"],isStarred:!0},{word:"accomplish",meaning:"達成する、完成させる",tags:["動詞","一般","TOEIC"]},{word:"appropriate",meaning:"適切な、ふさわしい",tags:["形容詞","一般","TOEIC"]},{word:"convenience",meaning:"便利さ、都合",tags:["名詞","一般","TOEIC"]},{word:"demonstrate",meaning:"実演する、証明する",tags:["動詞","一般","TOEIC"]},{word:"efficient",meaning:"効率的な、能率的な",tags:["形容詞","ビジネス","TOEIC"],isStarred:!0},{word:"foundation",meaning:"基礎、土台、財団",tags:["名詞","一般","TOEIC"]},{word:"guarantee",meaning:"保証する、保証",tags:["動詞","名詞","ビジネス","TOEIC"]},{word:"household",meaning:"家庭の、世帯",tags:["形容詞","名詞","一般","TOEIC"]},{word:"instruction",meaning:"指示、指導、説明書",tags:["名詞","一般","TOEIC"]},{word:"merchandise",meaning:"商品、品物",tags:["名詞","ビジネス","TOEIC"]},{word:"negotiate",meaning:"交渉する、取り決める",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"obligation",meaning:"義務、責任",tags:["名詞","ビジネス","TOEIC"]},{word:"outstanding",meaning:"優秀な、未払いの",tags:["形容詞","ビジネス","TOEIC"]},{word:"personnel",meaning:"職員、人事",tags:["名詞","ビジネス","TOEIC"]},{word:"priority",meaning:"優先事項、優先権",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"remarkable",meaning:"注目すべき、驚くべき",tags:["形容詞","一般","TOEIC"]},{word:"reputation",meaning:"評判、名声",tags:["名詞","ビジネス","TOEIC"]},{word:"strategy",meaning:"戦略、計画",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"substantial",meaning:"かなりの、実質的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"transportation",meaning:"輸送、交通機関",tags:["名詞","一般","TOEIC"]}],p=()=>h;class x{static getPageItems(e,a,t){let s=(a-1)*t;return e.slice(s,s+t)}static getTotalPages(e,a){return Math.ceil(e/a)}}class j{static filterCards(e,a,t,s){return e.filter(e=>{if(a){let t=a.toLowerCase(),s=e.word.toLowerCase().includes(t),n=e.meaning.toLowerCase().includes(t);if(!s&&!n)return!1}return!!(!t||e.tags&&e.tags.includes(t))&&(!s||!!e.isStarred)})}static sortCards(e,a,t){let s=[...e];return s.sort((e,s)=>{let n=0;switch(a){case"createdAt":n=new Date(e.created_at).getTime()-new Date(s.created_at).getTime();break;case"updatedAt":n=new Date(e.updated_at).getTime()-new Date(s.updated_at).getTime();break;case"alphabetical":n=e.word.toLowerCase().localeCompare(s.word.toLowerCase())}return"asc"===t?n:-n}),s}static getAllTags(e){let a=new Set;return e.forEach(e=>{e.tags&&e.tags.forEach(e=>a.add(e))}),Array.from(a).sort()}}let v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{itemsPerPage:a=6}=e,{dataManager:t,isCloudMode:s}=(0,u.B)(),[r,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(!0),[d,c]=(0,n.useState)(null),[g,m]=(0,n.useState)(1),[h,v]=(0,n.useState)(""),[C,f]=(0,n.useState)("createdAt"),[w,b]=(0,n.useState)("desc"),[N,y]=(0,n.useState)(!1),[E,T]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{try{o(!0),c(null);let e=await t.getAllCards();if(0===e.length){let e=p(),a=await t.createCards(e);i(a)}else i(e)}catch(e){console.error("Error loading cards:",e),c(e instanceof Error?e.message:"Failed to load cards")}finally{o(!1)}})()},[t]);let{filteredCards:S,availableTags:I,displayCards:O,totalPages:k}=(0,n.useMemo)(()=>{let e=j.filterCards(r,h,E,N),t=j.sortCards(e,C,w),s=x.getPageItems(t,g,a),n=x.getTotalPages(t.length,a);return{filteredCards:t,availableTags:j.getAllTags(r),displayCards:s,totalPages:n}},[r,g,a,h,C,w,N,E]);(0,n.useEffect)(()=>{m(1)},[h,E,N,C,w]);let F=async e=>{let a=r.find(a=>a.id===e);if(a)try{let s=await t.updateCard(e,{isStarred:!a.isStarred});i(a=>a.map(a=>a.id===e?s:a))}catch(e){console.error("Error toggling star:",e),c(e instanceof Error?e.message:"Failed to update card")}};return{cards:r,filteredCards:S,displayCards:O,availableTags:I,totalPages:k,loading:l,error:d,isCloudMode:s,currentPage:g,searchQuery:h,sortBy:C,sortOrder:w,showStarredOnly:N,selectedTag:E,itemsPerPage:a,setSearchQuery:v,setSortBy:f,setSortOrder:b,setShowStarredOnly:y,setSelectedTag:T,handlePageChange:e=>{m(e),window.scrollTo({top:0,behavior:"smooth"})},createCard:async e=>{try{let a=await t.createCard(e);i(e=>[a,...e])}catch(e){console.error("Error creating card:",e),c(e instanceof Error?e.message:"Failed to create card")}},updateCard:async(e,a)=>{try{let s=await t.updateCard(e,a);i(a=>a.map(a=>a.id===e?s:a))}catch(e){console.error("Error updating card:",e),c(e instanceof Error?e.message:"Failed to update card")}},deleteCard:async e=>{if(window.confirm("このカードを削除しますか？"))try{await t.deleteCard(e),i(a=>a.filter(a=>a.id!==e))}catch(e){console.error("Error deleting card:",e),c(e instanceof Error?e.message:"Failed to delete card")}},toggleStar:F,loadSampleData:async()=>{if(window.confirm("現在のデータを削除してTOEIC700点レベルのサンプルデータを読み込みますか？"))try{await t.deleteAllCards();let e=p(),a=await t.createCards(e);i(a),m(1)}catch(e){console.error("Error loading sample data:",e),c(e instanceof Error?e.message:"Failed to load sample data")}}}};function C(){let{user:e,loading:a}=(0,r.a)(),[t,u]=(0,n.useState)("signin"),[h,p]=(0,n.useState)(!1),{cards:x,filteredCards:j,displayCards:C,loading:f,error:w,searchQuery:b,setSearchQuery:N,sortBy:y,setSortBy:E,sortOrder:T,setSortOrder:S,selectedTag:I,setSelectedTag:O,showStarredOnly:k,setShowStarredOnly:F,currentPage:A,handlePageChange:P,totalPages:D,createCard:B,updateCard:L,deleteCard:M,toggleStar:_,loadSampleData:q,availableTags:R}=v(),[z,H]=(0,n.useState)(!1),[G,J]=(0,n.useState)(),U=e=>{J(e),H(!0)},Q=()=>{H(!1),J(void 0)},V=async e=>{await B(e),Q()},W=async e=>{G&&(await L(G.id,e),Q())},K=async e=>{window.confirm("この単語カードを削除しますか？")&&await M(e)};return a?(0,s.jsx)(o,{}):e?(0,s.jsxs)("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,s.jsx)("h1",{children:"単語カードアプリ"}),(0,s.jsx)("button",{onClick:()=>p(!h),style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:h?"プロフィールを閉じる":"プロフィール"})]}),h&&(0,s.jsx)("div",{style:{marginBottom:"20px"},children:(0,s.jsx)(l,{onClose:()=>p(!1)})}),(0,s.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,s.jsx)("button",{onClick:()=>{J(void 0),H(!0)},style:{padding:"12px 24px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",marginRight:"10px"},children:"新しい単語カードを追加"}),0===x.length&&(0,s.jsx)("button",{onClick:q,style:{padding:"12px 24px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"サンプルデータを読み込み"})]}),z&&(0,s.jsx)("div",{style:{marginBottom:"20px"},children:(0,s.jsx)(c,{card:G,onSave:G?W:V,onCancel:Q})}),x.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{searchQuery:b,onSearchChange:N,sortBy:y,onSortByChange:E,sortOrder:T,onSortOrderChange:S,selectedTag:I,onSelectedTagChange:O,showStarredOnly:k,onShowStarredOnlyChange:F,availableTags:R,totalCards:x.length,filteredCards:j.length}),f?(0,s.jsx)(o,{}):C.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",margin:"20px 0"},children:C.map(e=>(0,s.jsx)(d,{card:e,onEdit:()=>U(e),onDelete:()=>K(e.id),onToggleStar:()=>_(e.id)},e.id))}),D>1&&(0,s.jsx)(m,{currentPage:A,totalPages:D,onPageChange:P,itemsPerPage:6,totalItems:j.length})]}):(0,s.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:(0,s.jsx)("p",{children:"条件に一致する単語カードが見つかりません。"})})]}),w&&(0,s.jsxs)("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"4px",margin:"20px 0"},children:["エラー: ",w]})]}):(0,s.jsxs)("div",{style:{padding:"20px"},children:[(0,s.jsx)("h1",{children:"単語カードアプリ"}),(0,s.jsx)("p",{children:"ログインして単語カードの学習を始めましょう"}),(0,s.jsx)(i,{mode:t,onToggleMode:()=>{u("signin"===t?"signup":"signin")}})]})}},5584:function(){},7062:function(){},968:function(){},3672:function(){},2810:function(){},5283:function(){},7959:function(){}},function(e){e.O(0,[826,358,990,943,246,971,117,744],function(){return e(e.s=2967)}),_N_E=e.O()}]);