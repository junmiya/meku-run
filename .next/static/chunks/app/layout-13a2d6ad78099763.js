(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3542:function(t,e,n){Promise.resolve().then(n.t.bind(n,1030,23)),Promise.resolve().then(n.t.bind(n,6810,23)),Promise.resolve().then(n.t.bind(n,8487,23)),Promise.resolve().then(n.bind(n,6281))},6281:function(t,e,n){"use strict";n.d(e,{AuthProvider:function(){return s},a:function(){return u}});var r=n(7437),a=n(2265),i=n(2141);let o=(0,a.createContext)(void 0),u=()=>{let t=(0,a.useContext)(o);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t},s=t=>{let{children:e}=t,[n,u]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),h=(0,i.e)();(0,a.useEffect)(()=>{(async()=>{let{data:{session:t},error:e}=await h.auth.getSession();e?console.error("Error getting session:",e):(l(t),u(t?.user??null)),d(!1)})();let{data:{subscription:t}}=h.auth.onAuthStateChange(async(t,e)=>{console.log("Auth state changed:",t,e),l(e),u(e?.user??null),d(!1),"SIGNED_IN"===t&&e?.user&&await f(e.user)});return()=>t.unsubscribe()},[]);let f=async t=>{try{let{error:e}=await h.from("user_profiles").upsert([{id:t.id,full_name:t.user_metadata?.full_name||null,avatar_url:t.user_metadata?.avatar_url||null,updated_at:new Date().toISOString()}]);e&&console.error("Error updating profile:",e)}catch(t){console.error("Error in createOrUpdateProfile:",t)}},w=async(t,e,n)=>{d(!0);try{return await h.auth.signUp({email:t,password:e,...n&&{options:n}})}finally{d(!1)}},g=async(t,e)=>{d(!0);try{return await h.auth.signInWithPassword({email:t,password:e})}finally{d(!1)}},p=async()=>{d(!0);try{let{error:t}=await h.auth.signOut();if(t)throw t}finally{d(!1)}},v=async t=>await h.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`}),y=async()=>{let t=`${window.location.origin}/auth/callback`;return await h.auth.signInWithOAuth({provider:"google",options:{redirectTo:t}})};return(0,r.jsx)(o.Provider,{value:{user:n,session:s,loading:c,signUp:w,signIn:g,signInWithGoogle:y,signOut:p,resetPassword:v},children:e})}},2141:function(t,e,n){"use strict";n.d(e,{e:function(){return a}});var r=n(5452);let a=()=>(0,r.createClientComponentClient)();(0,r.createClientComponentClient)()},1030:function(){},8487:function(){},6810:function(){}},function(t){t.O(0,[541,338,452,971,117,744],function(){return t(t.s=3542)}),_N_E=t.O()}]);