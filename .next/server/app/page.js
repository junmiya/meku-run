(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},6539:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),t(908),t(7449),t(5866);var r=t(3191),a=t(8716),i=t(7922),l=t.n(i),n=t(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,908)),"/workspace/word-card-app/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7449)),"/workspace/word-card-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/workspace/word-card-app/app/page.tsx"],u="/page",h={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3374:(e,s,t)=>{Promise.resolve().then(t.bind(t,1572))},1141:(e,s,t)=>{Promise.resolve().then(t.bind(t,3136))},8211:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},1572:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(326),a=t(7577),i=t(3136);t(2801);let l=({mode:e,onToggleMode:s})=>{let{signIn:t,signUp:l,signInWithGoogle:n,resetPassword:o,loading:c}=(0,i.a)(),[d,u]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[g,v]=(0,a.useState)(null),[j,f]=(0,a.useState)(null),[b,w]=(0,a.useState)(!1),y=async s=>{if(s.preventDefault(),v(null),f(null),!d.trim()||!h.trim()){v("メールアドレスとパスワードを入力してください");return}if("signup"===e&&!m.trim()){v("氏名を入力してください");return}try{let s;(s="signin"===e?await t(d,h):await l(d,h,{data:{full_name:m}})).error?v(P(s.error.message)):"signup"===e&&s.data.user&&!s.data.session&&f("確認メールを送信しました。メールをチェックして、アカウントを有効化してください。")}catch(e){v("予期しないエラーが発生しました"),console.error("Auth error:",e)}},N=async e=>{if(e.preventDefault(),v(null),f(null),!d.trim()){v("メールアドレスを入力してください");return}try{let e=await o(d);e.error?v(P(e.error.message)):(f("パスワードリセットメールを送信しました"),w(!1))}catch(e){v("予期しないエラーが発生しました"),console.error("Reset password error:",e)}},_=async()=>{try{v(null);let e=await n();e.error?v(P(e.error.message)):e.data.url&&(window.location.href=e.data.url)}catch(e){v("Google認証でエラーが発生しました"),console.error("Google auth error:",e)}},P=e=>({"Invalid login credentials":"メールアドレスまたはパスワードが正しくありません","Email not confirmed":"メールアドレスが確認されていません","User already registered":"このメールアドレスは既に登録されています","Password should be at least 6 characters":"パスワードは6文字以上で入力してください","Invalid email":"メールアドレスの形式が正しくありません"})[e]||`エラー: ${e}`;return b?(0,r.jsxs)("div",{className:"auth-form",children:[r.jsx("h2",{children:"パスワードリセット"}),(0,r.jsxs)("form",{onSubmit:N,children:[(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"reset-email",children:"メールアドレス"}),r.jsx("input",{type:"email",id:"reset-email",value:d,onChange:e=>u(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),g&&r.jsx("div",{className:"error-message",children:g}),j&&r.jsx("div",{className:"success-message",children:j}),r.jsx("button",{type:"submit",disabled:c,className:"auth-button",children:c?"リセット中...":"パスワードリセット"}),r.jsx("button",{type:"button",onClick:()=>w(!1),className:"link-button",children:"ログインに戻る"})]})]}):(0,r.jsxs)("div",{className:"auth-form",children:[r.jsx("h2",{children:"signin"===e?"ログイン":"アカウント作成"}),r.jsx("div",{className:"google-auth-section",children:(0,r.jsxs)("button",{type:"button",onClick:_,disabled:c,className:"google-signin-button",children:[(0,r.jsxs)("svg",{className:"google-icon",viewBox:"0 0 24 24",width:"20",height:"20",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Googleで","signin"===e?"ログイン":"登録"]})}),r.jsx("div",{className:"divider",children:r.jsx("span",{children:"または"})}),(0,r.jsxs)("form",{onSubmit:y,children:["signup"===e&&(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"fullName",children:"氏名"}),r.jsx("input",{type:"text",id:"fullName",value:m,onChange:e=>x(e.target.value),placeholder:"氏名を入力",required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"メールアドレス"}),r.jsx("input",{type:"email",id:"email",value:d,onChange:e=>u(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"パスワード"}),r.jsx("input",{type:"password",id:"password",value:h,onChange:e=>p(e.target.value),placeholder:"パスワードを入力（6文字以上）",minLength:6,required:!0})]}),g&&r.jsx("div",{className:"error-message",children:g}),j&&r.jsx("div",{className:"success-message",children:j}),r.jsx("button",{type:"submit",disabled:c,className:"auth-button",children:c?"signin"===e?"ログイン中...":"アカウント作成中...":"signin"===e?"ログイン":"アカウント作成"}),(0,r.jsxs)("div",{className:"auth-links",children:["signin"===e&&r.jsx("button",{type:"button",onClick:()=>w(!0),className:"link-button",children:"パスワードを忘れた方"}),r.jsx("button",{type:"button",onClick:s,className:"link-button",children:"signin"===e?"アカウントをお持ちでない方はこちら":"既にアカウントをお持ちの方はこちら"})]})]})]})};t(7621);let n=({onClose:e})=>{let{user:s,signOut:t}=(0,i.a)(),[l,n]=(0,a.useState)(!1),o=async()=>{n(!0);try{await t()}catch(e){console.error("Sign out error:",e),n(!1)}};return s?r.jsx("div",{className:"user-profile-overlay",children:(0,r.jsxs)("div",{className:"user-profile",children:[(0,r.jsxs)("div",{className:"profile-header",children:[r.jsx("h3",{children:"プロフィール"}),r.jsx("button",{onClick:e,className:"close-button",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"profile-content",children:[(0,r.jsxs)("div",{className:"profile-info",children:[r.jsx("div",{className:"avatar",children:s.user_metadata?.avatar_url?r.jsx("img",{src:s.user_metadata.avatar_url,alt:"Avatar"}):r.jsx("div",{className:"avatar-placeholder",children:s.user_metadata?.full_name?.charAt(0)||s.email?.charAt(0)||"?"})}),(0,r.jsxs)("div",{className:"user-details",children:[r.jsx("p",{className:"user-name",children:s.user_metadata?.full_name||"ユーザー"}),r.jsx("p",{className:"user-email",children:s.email})]})]}),(0,r.jsxs)("div",{className:"profile-stats",children:[(0,r.jsxs)("div",{className:"stat",children:[r.jsx("span",{className:"stat-label",children:"アカウント作成日"}),r.jsx("span",{className:"stat-value",children:new Date(s.created_at).toLocaleDateString("ja-JP")})]}),(0,r.jsxs)("div",{className:"stat",children:[r.jsx("span",{className:"stat-label",children:"最終ログイン"}),r.jsx("span",{className:"stat-value",children:s.last_sign_in_at?new Date(s.last_sign_in_at).toLocaleDateString("ja-JP"):"不明"})]})]}),r.jsx("div",{className:"profile-actions",children:r.jsx("button",{onClick:o,disabled:l,className:"signout-button",children:l?"ログアウト中...":"ログアウト"})})]})]})}):null};var o=t(969);function c(){let{user:e,loading:s}=(0,i.a)(),[t,c]=(0,a.useState)("signin");return s?r.jsx(o.Z,{}):e?(0,r.jsxs)("div",{style:{padding:"20px"},children:[r.jsx("h1",{children:"単語カードアプリ"}),r.jsx(n,{onClose:()=>{}}),(0,r.jsxs)("div",{style:{marginTop:"20px"},children:[r.jsx("h2",{children:"単語カード機能"}),r.jsx("p",{children:"認証が完了しました。単語カード機能を実装します。"})]})]}):(0,r.jsxs)("div",{style:{padding:"20px"},children:[r.jsx("h1",{children:"単語カードアプリ"}),r.jsx("p",{children:"ログインして単語カードの学習を始めましょう"}),r.jsx(l,{mode:t,onToggleMode:()=>{c("signin"===t?"signup":"signin")}})]})}},969:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(326);t(7577),t(4296);let a=({size:e="medium"})=>r.jsx("div",{className:`loading-spinner ${e}`,children:r.jsx("div",{className:"spinner"})})},3136:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>o,a:()=>n});var r=t(326),a=t(7577),i=t(5442);let l=(0,a.createContext)(void 0),n=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},o=({children:e})=>{let[s,t]=(0,a.useState)(null),[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),u=(0,i.e)();(0,a.useEffect)(()=>{(async()=>{let{data:{session:e},error:s}=await u.auth.getSession();s?console.error("Error getting session:",s):(o(e),t(e?.user??null)),d(!1)})();let{data:{subscription:e}}=u.auth.onAuthStateChange(async(e,s)=>{console.log("Auth state changed:",e,s),o(s),t(s?.user??null),d(!1),"SIGNED_IN"===e&&s?.user&&await h(s.user)});return()=>e.unsubscribe()},[]);let h=async e=>{try{let{error:s}=await u.from("user_profiles").upsert([{id:e.id,full_name:e.user_metadata?.full_name||null,avatar_url:e.user_metadata?.avatar_url||null,updated_at:new Date().toISOString()}]);s&&console.error("Error updating profile:",s)}catch(e){console.error("Error in createOrUpdateProfile:",e)}},p=async(e,s,t)=>{d(!0);try{return await u.auth.signUp({email:e,password:s,...t&&{options:t}})}finally{d(!1)}},m=async(e,s)=>{d(!0);try{return await u.auth.signInWithPassword({email:e,password:s})}finally{d(!1)}},x=async()=>{d(!0);try{let{error:e}=await u.auth.signOut();if(e)throw e}finally{d(!1)}},g=async e=>await u.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`}),v=async()=>{let e=`${window.location.origin}/auth/callback`;return await u.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}})};return r.jsx(l.Provider,{value:{user:s,session:n,loading:c,signUp:p,signIn:m,signInWithGoogle:v,signOut:x,resetPassword:g},children:e})}},5442:(e,s,t)=>{"use strict";t.d(s,{e:()=>a});var r=t(9813);let a=()=>(0,r.createClientComponentClient)();(0,r.createClientComponentClient)()},7449:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n,metadata:()=>l});var r=t(9510),a=t(8570);(0,a.createProxy)(String.raw`/workspace/word-card-app/contexts/AuthContext.tsx#useAuth`);let i=(0,a.createProxy)(String.raw`/workspace/word-card-app/contexts/AuthContext.tsx#AuthProvider`);t(6319),t(1295),t(8569);let l={title:"単語カードアプリ",description:"Google認証対応の単語学習アプリ"};function n({children:e}){return r.jsx("html",{lang:"ja",children:r.jsx("body",{children:r.jsx(i,{children:e})})})}},908:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/workspace/word-card-app/app/page.tsx#default`)},6319:()=>{},2801:()=>{},8569:()=>{},4296:()=>{},1295:()=>{},7621:()=>{}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[534],()=>t(6539));module.exports=r})();