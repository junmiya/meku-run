(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1230:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>g,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(908),s(2488),s(5866);var t=s(3191),r=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(a,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,908)),"/workspace/firebase-word-card-app/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2488)),"/workspace/firebase-word-card-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/firebase-word-card-app/app/page.tsx"],g="/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},847:(e,a,s)=>{Promise.resolve().then(s.bind(s,2631))},2631:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var t=s(326),r=s(7577),n=s.n(r),i=s(4001);s(3069);let l=({mode:e,onToggleMode:a})=>{let{signIn:s,signUp:n,signInWithGoogle:l,resetPassword:o,loading:d}=(0,i.a)(),[c,g]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[x,j]=(0,r.useState)(null),[b,v]=(0,r.useState)(null),[w,f]=(0,r.useState)(!1),C=async a=>{if(a.preventDefault(),j(null),v(null),!c.trim()||!u.trim()){j("メールアドレスとパスワードを入力してください");return}if("signup"===e&&!h.trim()){j("氏名を入力してください");return}try{"signin"===e?await s(c,u):(await n(c,u,h),v("アカウントが作成されました"))}catch(e){console.error("Full auth error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),j(N(e.code||e.message))}},y=async e=>{if(e.preventDefault(),j(null),v(null),!c.trim()){j("メールアドレスを入力してください");return}try{await o(c),v("パスワードリセットメールを送信しました"),f(!1)}catch(e){console.error("Reset password error:",e),j(N(e.code||e.message))}},N=e=>({"auth/invalid-email":"メールアドレスの形式が正しくありません","auth/user-disabled":"このアカウントは無効化されています","auth/user-not-found":"このメールアドレスのアカウントが見つかりません","auth/wrong-password":"パスワードが間違っています","auth/invalid-credential":"メールアドレスまたはパスワードが正しくありません","auth/too-many-requests":"ログイン試行回数が多すぎます。しばらく待ってから再試行してください","auth/popup-closed-by-user":"ログインがキャンセルされました","auth/weak-password":"パスワードは6文字以上で入力してください","auth/email-already-in-use":"このメールアドレスは既に使用されています",認証機能が無効になっています:"認証機能が無効になっています"})[e]||`エラー: ${e}`;return w?(0,t.jsxs)("div",{className:"auth-form",children:[t.jsx("h2",{children:"パスワードリセット"}),(0,t.jsxs)("form",{onSubmit:y,children:[(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"reset-email",children:"メールアドレス"}),t.jsx("input",{type:"email",id:"reset-email",value:c,onChange:e=>g(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),x&&t.jsx("div",{className:"error-message",children:x}),b&&t.jsx("div",{className:"success-message",children:b}),t.jsx("button",{type:"submit",disabled:d,className:"auth-button",children:d?"リセット中...":"パスワードリセット"}),t.jsx("button",{type:"button",onClick:()=>f(!1),className:"link-button",children:"ログインに戻る"})]})]}):(0,t.jsxs)("div",{className:"auth-form",children:[t.jsx("h2",{children:"signin"===e?"ログイン":"アカウント作成"}),(0,t.jsxs)("form",{onSubmit:C,children:["signup"===e&&(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"fullName",children:"氏名"}),t.jsx("input",{type:"text",id:"fullName",value:h,onChange:e=>p(e.target.value),placeholder:"氏名を入力",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"email",children:"メールアドレス"}),t.jsx("input",{type:"email",id:"email",value:c,onChange:e=>g(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"password",children:"パスワード"}),t.jsx("input",{type:"password",id:"password",value:u,onChange:e=>m(e.target.value),placeholder:"パスワードを入力（6文字以上）",minLength:6,required:!0})]}),x&&t.jsx("div",{className:"error-message",children:x}),b&&t.jsx("div",{className:"success-message",children:b}),t.jsx("button",{type:"submit",disabled:d,className:"auth-button",children:d?"signin"===e?"ログイン中...":"アカウント作成中...":"signin"===e?"ログイン":"アカウント作成"}),(0,t.jsxs)("div",{className:"auth-links",children:["signin"===e&&t.jsx("button",{type:"button",onClick:()=>f(!0),className:"link-button",children:"パスワードを忘れた方"}),t.jsx("button",{type:"button",onClick:a,className:"link-button",children:"signin"===e?"アカウントをお持ちでない方はこちら":"既にアカウントをお持ちの方はこちら"})]})]})]})};s(6650);let o=({onClose:e})=>{let{user:a,signOut:s}=(0,i.a)(),[n,l]=(0,r.useState)(!1),o=async()=>{l(!0);try{await s()}catch(e){console.error("Sign out error:",e),l(!1)}};return a?t.jsx("div",{className:"user-profile-overlay",children:(0,t.jsxs)("div",{className:"user-profile",children:[(0,t.jsxs)("div",{className:"profile-header",children:[t.jsx("h3",{children:"プロフィール"}),t.jsx("button",{onClick:e,className:"close-button",children:"\xd7"})]}),(0,t.jsxs)("div",{className:"profile-content",children:[(0,t.jsxs)("div",{className:"profile-info",children:[t.jsx("div",{className:"avatar",children:a.photoURL?t.jsx("img",{src:a.photoURL,alt:"Avatar"}):t.jsx("div",{className:"avatar-placeholder",children:a.displayName?.charAt(0)||a.email?.charAt(0)||"?"})}),(0,t.jsxs)("div",{className:"user-details",children:[t.jsx("p",{className:"user-name",children:a.displayName||"ユーザー"}),t.jsx("p",{className:"user-email",children:a.email})]})]}),(0,t.jsxs)("div",{className:"profile-stats",children:[(0,t.jsxs)("div",{className:"stat",children:[t.jsx("span",{className:"stat-label",children:"アカウント作成日"}),t.jsx("span",{className:"stat-value",children:a.metadata.creationTime?new Date(a.metadata.creationTime).toLocaleDateString("ja-JP"):"不明"})]}),(0,t.jsxs)("div",{className:"stat",children:[t.jsx("span",{className:"stat-label",children:"最終ログイン"}),t.jsx("span",{className:"stat-value",children:a.metadata.lastSignInTime?new Date(a.metadata.lastSignInTime).toLocaleDateString("ja-JP"):"不明"})]})]}),t.jsx("div",{className:"profile-actions",children:t.jsx("button",{onClick:o,disabled:n,className:"signout-button",children:n?"ログアウト中...":"ログアウト"})})]})]})}):null};s(1184);let d=({size:e="medium"})=>t.jsx("div",{className:`loading-spinner ${e}`,children:t.jsx("div",{className:"spinner"})});s(7657);let c=({card:e,onEdit:a,onDelete:s,onToggleStar:n})=>{let[i,l]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"card-container",children:[(0,t.jsxs)("div",{className:`card ${i?"flipped":""}`,onClick:()=>{l(!i)},children:[t.jsx("div",{className:"card-face front",children:(0,t.jsxs)("div",{className:"card-content",children:[t.jsx("h3",{children:e.word}),e.tags&&e.tags.length>0&&t.jsx("div",{className:"tags",children:e.tags.map((e,a)=>t.jsx("span",{className:"tag",children:e},a))})]})}),t.jsx("div",{className:"card-face back",children:t.jsx("div",{className:"card-content",children:t.jsx("p",{children:e.meaning})})})]}),(0,t.jsxs)("div",{className:"card-actions",children:[t.jsx("button",{className:`star-btn ${e.isStarred?"starred":""}`,onClick:a=>{a.stopPropagation(),n?.(e.id)},children:"★"}),t.jsx("button",{className:"edit-btn",onClick:s=>{s.stopPropagation(),a?.(e)},children:"編集"}),t.jsx("button",{className:"delete-btn",onClick:a=>{a.stopPropagation(),s?.(e.id)},children:"削除"})]})]})};s(677);let g=({card:e,onSave:a,onCancel:s})=>{let[n,i]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[g,u]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{e&&(i(e.word),o(e.meaning),c(e.tags?.join(", ")||""),u(e.isStarred||!1))},[e]),t.jsx("div",{className:"card-form-overlay",children:(0,t.jsxs)("div",{className:"card-form",children:[t.jsx("h2",{children:e?"単語カードを編集":"新しい単語カードを作成"}),(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n.trim()||!l.trim()){alert("単語と意味を入力してください");return}let s=d.split(",").map(e=>e.trim()).filter(e=>e.length>0);a({word:n.trim(),meaning:l.trim(),isStarred:g,...s.length>0&&{tags:s}}),i(""),o(""),c(""),u(!1)},children:[(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"word",children:"単語"}),t.jsx("input",{type:"text",id:"word",value:n,onChange:e=>i(e.target.value),placeholder:"単語を入力",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"meaning",children:"意味"}),t.jsx("textarea",{id:"meaning",value:l,onChange:e=>o(e.target.value),placeholder:"意味を入力",rows:3,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"tags",children:"タグ（カンマ区切り）"}),t.jsx("input",{type:"text",id:"tags",value:d,onChange:e=>c(e.target.value),placeholder:"タグ1, タグ2, タグ3"})]}),t.jsx("div",{className:"form-group checkbox-group",children:(0,t.jsxs)("label",{children:[t.jsx("input",{type:"checkbox",checked:g,onChange:e=>u(e.target.checked)}),"お気に入り"]})}),(0,t.jsxs)("div",{className:"form-actions",children:[t.jsx("button",{type:"button",onClick:s,className:"cancel-btn",children:"キャンセル"}),t.jsx("button",{type:"submit",className:"save-btn",children:e?"更新":"保存"})]})]})]})})};s(4590);let u=({searchQuery:e,onSearchChange:a,sortBy:s,onSortByChange:r,sortOrder:n,onSortOrderChange:i,showStarredOnly:l,onShowStarredOnlyChange:o,selectedTag:d,onSelectedTagChange:c,availableTags:g,totalCards:u,filteredCards:m})=>(0,t.jsxs)("div",{className:"search-filter",children:[t.jsx("div",{className:"search-section",children:(0,t.jsxs)("div",{className:"search-input-container",children:[t.jsx("input",{type:"text",placeholder:"単語や意味で検索...",value:e,onChange:e=>a(e.target.value),className:"search-input"}),e&&t.jsx("button",{className:"clear-search",onClick:()=>a(""),children:"\xd7"})]})}),(0,t.jsxs)("div",{className:"filter-section",children:[(0,t.jsxs)("div",{className:"filter-group",children:[t.jsx("label",{children:"並び順:"}),(0,t.jsxs)("select",{value:s,onChange:e=>r(e.target.value),className:"filter-select",children:[t.jsx("option",{value:"createdAt",children:"作成日"}),t.jsx("option",{value:"updatedAt",children:"更新日"}),t.jsx("option",{value:"alphabetical",children:"アルファベット順"})]}),t.jsx("button",{className:`sort-order-btn ${"desc"===n?"desc":"asc"}`,onClick:()=>i("asc"===n?"desc":"asc"),title:"asc"===n?"昇順":"降順",children:"asc"===n?"↑":"↓"})]}),(0,t.jsxs)("div",{className:"filter-group",children:[t.jsx("label",{children:"タグ:"}),(0,t.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"filter-select",children:[t.jsx("option",{value:"",children:"すべて"}),g.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsx("div",{className:"filter-group",children:(0,t.jsxs)("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:l,onChange:e=>o(e.target.checked)}),"お気に入りのみ"]})})]}),t.jsx("div",{className:"filter-summary",children:m!==u&&(0,t.jsxs)("span",{className:"filter-result",children:[u,"件中",m,"件を表示"]})})]});s(1550);let m=({currentPage:e,totalPages:a,onPageChange:s,itemsPerPage:r,totalItems:i})=>{if(a<=1)return null;let l=Math.min(e*r,i),o=(()=>{let s=[],t=[],r=Math.max(1,e-2),n=Math.min(a,e+2);for(let e=r;e<=n;e++)s.push(e);return r>2?t.push(1,"..."):2===r&&t.push(1),t.push(...s),n<a-1?t.push("...",a):n===a-1&&t.push(a),t})();return(0,t.jsxs)("div",{className:"pagination-container",children:[(0,t.jsxs)("div",{className:"pagination-info",children:[i,"件中 ",(e-1)*r+1,"-",l,"件を表示"]}),(0,t.jsxs)("div",{className:"pagination",children:[t.jsx("button",{className:"pagination-btn",onClick:()=>s(e-1),disabled:1===e,children:"← 前へ"}),o.map((a,r)=>t.jsx(n().Fragment,{children:"..."===a?t.jsx("span",{className:"pagination-dots",children:"..."}):t.jsx("button",{className:`pagination-btn ${a===e?"active":""}`,onClick:()=>s(a),children:a})},r)),t.jsx("button",{className:"pagination-btn",onClick:()=>s(e+1),disabled:e===a,children:"次へ →"})]})]})};var h=s(6368),p=s(2719),x=s(792);let j=({isOpen:e,onClose:a})=>{let{user:s,isAuthEnabled:l}=(0,i.a)(),{dataManager:o}=(0,h.B)(),[d,c]=(0,r.useState)(!1),[g,u]=(0,r.useState)(null),[m,j]=(0,r.useState)(0),[b,v]=(0,r.useState)(0);n().useEffect(()=>{e&&l&&s&&w()},[e,l,s]);let w=async()=>{try{let e=new p.A,a=await e.getAllCards();if(j(a.length),s){let e=new x.q(s),a=await e.getAllCards();v(a.length)}}catch(e){console.error("Error checking data counts:",e)}},f=async()=>{if(!s||!l){u("認証が必要です");return}c(!0),u(null);try{let e=new p.A,a=await e.getAllCards();if(0===a.length){u("LocalStorageにデータがありません"),c(!1);return}let t=new x.q(s),r=await t.migrateFromLocalStorage(a);r.success?(u(`移行完了: ${a.length}件のデータを処理しました`),await w()):u(`移行エラー: ${r.errors?.map(e=>e.message).join(", ")}`)}catch(e){console.error("Migration error:",e),u(`移行エラー: ${e}`)}finally{c(!1)}},C=async()=>{if(window.confirm("LocalStorageのデータを削除しますか？この操作は取り消せません。"))try{let e=new p.A;await e.deleteAllCards(),j(0),u("LocalStorageのデータを削除しました")}catch(e){console.error("Error clearing localStorage:",e),u(`削除エラー: ${e}`)}};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"データ移行"}),l?s?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"現在のデータ状況"}),(0,t.jsxs)("div",{className:"bg-gray-100 p-3 rounded",children:[(0,t.jsxs)("p",{children:["LocalStorage: ",m,"件"]}),(0,t.jsxs)("p",{children:["Firestore: ",b,"件"]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"移行について"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["LocalStorageからFirestoreにデータを移行します。",t.jsx("br",{}),"重複したデータは作成されません。"]})]}),g&&t.jsx("div",{className:"mb-4 p-3 bg-blue-100 border border-blue-300 rounded",children:t.jsx("p",{className:"text-sm",children:g})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx("button",{onClick:f,disabled:d||0===m,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",children:d?"移行中...":"データを移行する"}),t.jsx("button",{onClick:C,disabled:d||0===m,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:bg-gray-400",children:"LocalStorageを削除"}),t.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"閉じる"})]})]}):(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("p",{className:"mb-4",children:"データ移行にはログインが必要です。"}),t.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"閉じる"})]}):(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("p",{className:"mb-4",children:"認証機能が無効のため、データ移行は利用できません。"}),t.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"閉じる"})]})]})}):null},b=[{word:"accomplish",meaning:"達成する、成し遂げる",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"acquire",meaning:"獲得する、身につける",tags:["動詞","ビジネス","TOEIC"]},{word:"adequate",meaning:"適切な、十分な",tags:["形容詞","ビジネス","TOEIC"]},{word:"administrator",meaning:"管理者、運営者",tags:["名詞","ビジネス","TOEIC"]},{word:"agenda",meaning:"議題、予定表",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"allocate",meaning:"割り当てる、配分する",tags:["動詞","ビジネス","TOEIC"]},{word:"annually",meaning:"年に一度、毎年",tags:["副詞","ビジネス","TOEIC"]},{word:"anticipate",meaning:"予期する、期待する",tags:["動詞","ビジネス","TOEIC"]},{word:"assessment",meaning:"評価、査定",tags:["名詞","ビジネス","TOEIC"]},{word:"authentic",meaning:"本物の、信頼できる",tags:["形容詞","ビジネス","TOEIC"]},{word:"budget",meaning:"予算、予算を組む",tags:["名詞","動詞","経済","TOEIC"],isStarred:!0},{word:"commodity",meaning:"商品、日用品",tags:["名詞","経済","TOEIC"]},{word:"comprehensive",meaning:"包括的な、総合的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"consecutive",meaning:"連続した、継続的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"corporate",meaning:"企業の、法人の",tags:["形容詞","ビジネス","TOEIC"],isStarred:!0},{word:"crucial",meaning:"極めて重要な、決定的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"deficit",meaning:"赤字、不足",tags:["名詞","経済","TOEIC"]},{word:"economical",meaning:"経済的な、節約の",tags:["形容詞","経済","TOEIC"]},{word:"eliminate",meaning:"除去する、削除する",tags:["動詞","ビジネス","TOEIC"]},{word:"estimate",meaning:"見積もる、推定する",tags:["動詞","名詞","ビジネス","TOEIC"]},{word:"implement",meaning:"実行する、実施する",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"innovative",meaning:"革新的な、斬新な",tags:["形容詞","技術","TOEIC"]},{word:"maintenance",meaning:"保守、維持管理",tags:["名詞","技術","TOEIC"]},{word:"manufacture",meaning:"製造する、製造業",tags:["動詞","名詞","製造","TOEIC"]},{word:"operational",meaning:"運営の、操作の",tags:["形容詞","ビジネス","TOEIC"]},{word:"procedure",meaning:"手順、手続き",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"productivity",meaning:"生産性、生産力",tags:["名詞","ビジネス","TOEIC"]},{word:"proposal",meaning:"提案、企画書",tags:["名詞","ビジネス","TOEIC"]},{word:"regulation",meaning:"規則、規制",tags:["名詞","ビジネス","TOEIC"]},{word:"revenue",meaning:"収入、歳入",tags:["名詞","経済","TOEIC"],isStarred:!0},{word:"accomplish",meaning:"達成する、完成させる",tags:["動詞","一般","TOEIC"]},{word:"appropriate",meaning:"適切な、ふさわしい",tags:["形容詞","一般","TOEIC"]},{word:"convenience",meaning:"便利さ、都合",tags:["名詞","一般","TOEIC"]},{word:"demonstrate",meaning:"実演する、証明する",tags:["動詞","一般","TOEIC"]},{word:"efficient",meaning:"効率的な、能率的な",tags:["形容詞","ビジネス","TOEIC"],isStarred:!0},{word:"foundation",meaning:"基礎、土台、財団",tags:["名詞","一般","TOEIC"]},{word:"guarantee",meaning:"保証する、保証",tags:["動詞","名詞","ビジネス","TOEIC"]},{word:"household",meaning:"家庭の、世帯",tags:["形容詞","名詞","一般","TOEIC"]},{word:"instruction",meaning:"指示、指導、説明書",tags:["名詞","一般","TOEIC"]},{word:"merchandise",meaning:"商品、品物",tags:["名詞","ビジネス","TOEIC"]},{word:"negotiate",meaning:"交渉する、取り決める",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"obligation",meaning:"義務、責任",tags:["名詞","ビジネス","TOEIC"]},{word:"outstanding",meaning:"優秀な、未払いの",tags:["形容詞","ビジネス","TOEIC"]},{word:"personnel",meaning:"職員、人事",tags:["名詞","ビジネス","TOEIC"]},{word:"priority",meaning:"優先事項、優先権",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"remarkable",meaning:"注目すべき、驚くべき",tags:["形容詞","一般","TOEIC"]},{word:"reputation",meaning:"評判、名声",tags:["名詞","ビジネス","TOEIC"]},{word:"strategy",meaning:"戦略、計画",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"substantial",meaning:"かなりの、実質的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"transportation",meaning:"輸送、交通機関",tags:["名詞","一般","TOEIC"]}],v=()=>b;class w{static getPageItems(e,a,s){let t=(a-1)*s;return e.slice(t,t+s)}static getTotalPages(e,a){return Math.ceil(e/a)}}class f{static filterCards(e,a,s,t){return e.filter(e=>{if(a){let s=a.toLowerCase(),t=e.word.toLowerCase().includes(s),r=e.meaning.toLowerCase().includes(s);if(!t&&!r)return!1}return!!(!s||e.tags&&e.tags.includes(s))&&(!t||!!e.isStarred)})}static sortCards(e,a,s){let t=[...e];return t.sort((e,t)=>{let r=0;switch(a){case"createdAt":r=new Date(e.created_at).getTime()-new Date(t.created_at).getTime();break;case"updatedAt":r=new Date(e.updated_at).getTime()-new Date(t.updated_at).getTime();break;case"alphabetical":r=e.word.toLowerCase().localeCompare(t.word.toLowerCase())}return"asc"===s?r:-r}),t}static getAllTags(e){let a=new Set;return e.forEach(e=>{e.tags&&e.tags.forEach(e=>a.add(e))}),Array.from(a).sort()}}let C=(e={})=>{let{itemsPerPage:a=6}=e,{dataManager:s,isCloudMode:t}=(0,h.B)(),[n,i]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),[g,u]=(0,r.useState)(1),[m,p]=(0,r.useState)(""),[x,j]=(0,r.useState)("createdAt"),[b,C]=(0,r.useState)("desc"),[y,N]=(0,r.useState)(!1),[E,S]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{o(!0),c(null);let e=await s.getAllCards();if(0===e.length){let e=v(),a=await s.createCards(e);i(a)}else i(e)}catch(e){console.error("Error loading cards:",e),c(e instanceof Error?e.message:"Failed to load cards")}finally{o(!1)}})()},[s]);let{filteredCards:T,availableTags:O,displayCards:I,totalPages:k}=(0,r.useMemo)(()=>{let e=f.filterCards(n,m,E,y),s=f.sortCards(e,x,b),t=w.getPageItems(s,g,a),r=w.getTotalPages(s.length,a);return{filteredCards:s,availableTags:f.getAllTags(n),displayCards:t,totalPages:r}},[n,g,a,m,x,b,y,E]);(0,r.useEffect)(()=>{u(1)},[m,E,y,x,b]);let q=async e=>{let a=n.find(a=>a.id===e);if(a)try{let t=await s.updateCard(e,{isStarred:!a.isStarred});i(a=>a.map(a=>a.id===e?t:a))}catch(e){console.error("Error toggling star:",e),c(e instanceof Error?e.message:"Failed to update card")}};return{cards:n,filteredCards:T,displayCards:I,availableTags:O,totalPages:k,loading:l,error:d,isCloudMode:t,currentPage:g,searchQuery:m,sortBy:x,sortOrder:b,showStarredOnly:y,selectedTag:E,itemsPerPage:a,setSearchQuery:p,setSortBy:j,setSortOrder:C,setShowStarredOnly:N,setSelectedTag:S,handlePageChange:e=>{u(e),window.scrollTo({top:0,behavior:"smooth"})},createCard:async e=>{try{let a=await s.createCard(e);i(e=>[a,...e])}catch(e){console.error("Error creating card:",e),c(e instanceof Error?e.message:"Failed to create card")}},updateCard:async(e,a)=>{try{let t=await s.updateCard(e,a);i(a=>a.map(a=>a.id===e?t:a))}catch(e){console.error("Error updating card:",e),c(e instanceof Error?e.message:"Failed to update card")}},deleteCard:async e=>{if(window.confirm("このカードを削除しますか？"))try{await s.deleteCard(e),i(a=>a.filter(a=>a.id!==e))}catch(e){console.error("Error deleting card:",e),c(e instanceof Error?e.message:"Failed to delete card")}},toggleStar:q,loadSampleData:async()=>{if(window.confirm("現在のデータを削除してTOEIC700点レベルのサンプルデータを読み込みますか？"))try{await s.deleteAllCards();let e=v(),a=await s.createCards(e);i(a),u(1)}catch(e){console.error("Error loading sample data:",e),c(e instanceof Error?e.message:"Failed to load sample data")}}}};function y(){let{user:e,loading:a,isAuthEnabled:s}=(0,i.a)();console.log("HomePage - Auth Status:",{user:e,loading:a,isAuthEnabled:s});let[n,h]=(0,r.useState)("signin"),[p,x]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),{cards:w,filteredCards:f,displayCards:y,loading:N,error:E,searchQuery:S,setSearchQuery:T,sortBy:O,setSortBy:I,sortOrder:k,setSortOrder:q,selectedTag:P,setSelectedTag:A,showStarredOnly:F,setShowStarredOnly:_,currentPage:L,handlePageChange:D,totalPages:M,createCard:R,updateCard:$,deleteCard:B,toggleStar:z,loadSampleData:G,availableTags:J}=C(),[U,H]=(0,r.useState)(!1),[Q,W]=(0,r.useState)(),X=e=>{W(e),H(!0)},Y=()=>{H(!1),W(void 0)},K=async e=>{await R(e),Y()},V=async e=>{Q&&(await $(Q.id,e),Y())},Z=async e=>{window.confirm("この単語カードを削除しますか？")&&await B(e)};return a?t.jsx(d,{}):e?(0,t.jsxs)("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t.jsx("h1",{children:"単語カードアプリ"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[t.jsx("button",{onClick:()=>v(!0),style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"データ移行"}),t.jsx("button",{onClick:()=>x(!p),style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:p?"プロフィールを閉じる":"プロフィール"})]})]}),p&&t.jsx("div",{style:{marginBottom:"20px"},children:t.jsx(o,{onClose:()=>x(!1)})}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[t.jsx("button",{onClick:()=>{W(void 0),H(!0)},style:{padding:"12px 24px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",marginRight:"10px"},children:"新しい単語カードを追加"}),0===w.length&&t.jsx("button",{onClick:G,style:{padding:"12px 24px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"サンプルデータを読み込み"})]}),U&&t.jsx("div",{style:{marginBottom:"20px"},children:t.jsx(g,{card:Q,onSave:Q?V:K,onCancel:Y})}),w.length>0&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(u,{searchQuery:S,onSearchChange:T,sortBy:O,onSortByChange:I,sortOrder:k,onSortOrderChange:q,selectedTag:P,onSelectedTagChange:A,showStarredOnly:F,onShowStarredOnlyChange:_,availableTags:J,totalCards:w.length,filteredCards:f.length}),N?t.jsx(d,{}):y.length>0?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",margin:"20px 0"},children:y.map(e=>t.jsx(c,{card:e,onEdit:()=>X(e),onDelete:()=>Z(e.id),onToggleStar:()=>z(e.id)},e.id))}),M>1&&t.jsx(m,{currentPage:L,totalPages:M,onPageChange:D,itemsPerPage:6,totalItems:f.length})]}):t.jsx("div",{style:{textAlign:"center",padding:"40px"},children:t.jsx("p",{children:"条件に一致する単語カードが見つかりません。"})})]}),E&&(0,t.jsxs)("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"4px",margin:"20px 0"},children:["エラー: ",E]}),t.jsx(j,{isOpen:b,onClose:()=>v(!1)})]}):(0,t.jsxs)("div",{style:{padding:"20px"},children:[t.jsx("h1",{children:"単語カードアプリ"}),(0,t.jsxs)("div",{style:{background:"#f0f0f0",padding:"10px",margin:"10px 0",fontSize:"12px"},children:[t.jsx("strong",{children:"デバッグ情報:"}),t.jsx("br",{}),"認証有効: ",s?"ON":"OFF",t.jsx("br",{}),"ユーザー: ",e?"ログイン済み":"ログインなし",t.jsx("br",{}),"ローディング: ",a?"YES":"NO"]}),t.jsx("p",{children:"ログインして単語カードの学習を始めましょう"}),t.jsx(l,{mode:n,onToggleMode:()=>{h("signin"===n?"signup":"signin")}})]})}},908:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`/workspace/firebase-word-card-app/app/page.tsx#default`)},3069:()=>{},1184:()=>{},6650:()=>{},677:()=>{},1550:()=>{},4590:()=>{},7657:()=>{}};var a=require("../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[805,728],()=>s(1230));module.exports=t})();