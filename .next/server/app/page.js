(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},665:e=>{"use strict";e.exports=require("dns")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},5816:e=>{"use strict";e.exports=require("process")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1230:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(908),s(2488),s(5866);var t=s(3191),r=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(a,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,908)),"/workspace/firebase-word-card-app/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2488)),"/workspace/firebase-word-card-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/firebase-word-card-app/app/page.tsx"],u="/page",g={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},847:(e,a,s)=>{Promise.resolve().then(s.bind(s,2628))},2628:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>w});var t=s(326),r=s(7577),n=s.n(r),i=s(4001);s(3069);let l=({mode:e,onToggleMode:a})=>{let{signIn:s,signUp:n,signInWithGoogle:l,resetPassword:o,loading:d}=(0,i.a)(),[c,u]=(0,r.useState)(""),[g,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[x,j]=(0,r.useState)(null),[v,C]=(0,r.useState)(null),[w,f]=(0,r.useState)(!1),b=async a=>{if(a.preventDefault(),j(null),C(null),!c.trim()||!g.trim()){j("メールアドレスとパスワードを入力してください");return}if("signup"===e&&!h.trim()){j("氏名を入力してください");return}try{"signin"===e?await s(c,g):(await n(c,g,h),C("アカウントが作成されました"))}catch(e){console.error("Full auth error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),j(E(e.code||e.message))}},N=async e=>{if(e.preventDefault(),j(null),C(null),!c.trim()){j("メールアドレスを入力してください");return}try{await o(c),C("パスワードリセットメールを送信しました"),f(!1)}catch(e){console.error("Reset password error:",e),j(E(e.code||e.message))}},y=async()=>{try{j(null),await l()}catch(e){console.error("Google auth error:",e),j(E(e.code||e.message))}},E=e=>({"auth/invalid-email":"メールアドレスの形式が正しくありません","auth/user-disabled":"このアカウントは無効化されています","auth/user-not-found":"このメールアドレスのアカウントが見つかりません","auth/wrong-password":"パスワードが間違っています","auth/invalid-credential":"メールアドレスまたはパスワードが正しくありません","auth/too-many-requests":"ログイン試行回数が多すぎます。しばらく待ってから再試行してください","auth/popup-closed-by-user":"ログインがキャンセルされました","auth/weak-password":"パスワードは6文字以上で入力してください","auth/email-already-in-use":"このメールアドレスは既に使用されています",認証機能が無効になっています:"認証機能が無効になっています"})[e]||`エラー: ${e}`;return w?(0,t.jsxs)("div",{className:"auth-form",children:[t.jsx("h2",{children:"パスワードリセット"}),(0,t.jsxs)("form",{onSubmit:N,children:[(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"reset-email",children:"メールアドレス"}),t.jsx("input",{type:"email",id:"reset-email",value:c,onChange:e=>u(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),x&&t.jsx("div",{className:"error-message",children:x}),v&&t.jsx("div",{className:"success-message",children:v}),t.jsx("button",{type:"submit",disabled:d,className:"auth-button",children:d?"リセット中...":"パスワードリセット"}),t.jsx("button",{type:"button",onClick:()=>f(!1),className:"link-button",children:"ログインに戻る"})]})]}):(0,t.jsxs)("div",{className:"auth-form",children:[t.jsx("h2",{children:"signin"===e?"ログイン":"アカウント作成"}),t.jsx("div",{className:"google-auth-section",children:(0,t.jsxs)("button",{type:"button",onClick:y,disabled:d,className:"google-signin-button",children:[(0,t.jsxs)("svg",{className:"google-icon",viewBox:"0 0 24 24",width:"20",height:"20",children:[t.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),t.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Googleで","signin"===e?"ログイン":"登録"]})}),t.jsx("div",{className:"divider",children:t.jsx("span",{children:"または"})}),(0,t.jsxs)("form",{onSubmit:b,children:["signup"===e&&(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"fullName",children:"氏名"}),t.jsx("input",{type:"text",id:"fullName",value:h,onChange:e=>p(e.target.value),placeholder:"氏名を入力",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"email",children:"メールアドレス"}),t.jsx("input",{type:"email",id:"email",value:c,onChange:e=>u(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"password",children:"パスワード"}),t.jsx("input",{type:"password",id:"password",value:g,onChange:e=>m(e.target.value),placeholder:"パスワードを入力（6文字以上）",minLength:6,required:!0})]}),x&&t.jsx("div",{className:"error-message",children:x}),v&&t.jsx("div",{className:"success-message",children:v}),t.jsx("button",{type:"submit",disabled:d,className:"auth-button",children:d?"signin"===e?"ログイン中...":"アカウント作成中...":"signin"===e?"ログイン":"アカウント作成"}),(0,t.jsxs)("div",{className:"auth-links",children:["signin"===e&&t.jsx("button",{type:"button",onClick:()=>f(!0),className:"link-button",children:"パスワードを忘れた方"}),t.jsx("button",{type:"button",onClick:a,className:"link-button",children:"signin"===e?"アカウントをお持ちでない方はこちら":"既にアカウントをお持ちの方はこちら"})]})]})]})};s(6650);let o=({onClose:e})=>{let{user:a,signOut:s}=(0,i.a)(),[n,l]=(0,r.useState)(!1),o=async()=>{l(!0);try{await s()}catch(e){console.error("Sign out error:",e),l(!1)}};return a?t.jsx("div",{className:"user-profile-overlay",children:(0,t.jsxs)("div",{className:"user-profile",children:[(0,t.jsxs)("div",{className:"profile-header",children:[t.jsx("h3",{children:"プロフィール"}),t.jsx("button",{onClick:e,className:"close-button",children:"\xd7"})]}),(0,t.jsxs)("div",{className:"profile-content",children:[(0,t.jsxs)("div",{className:"profile-info",children:[t.jsx("div",{className:"avatar",children:a.photoURL?t.jsx("img",{src:a.photoURL,alt:"Avatar"}):t.jsx("div",{className:"avatar-placeholder",children:a.displayName?.charAt(0)||a.email?.charAt(0)||"?"})}),(0,t.jsxs)("div",{className:"user-details",children:[t.jsx("p",{className:"user-name",children:a.displayName||"ユーザー"}),t.jsx("p",{className:"user-email",children:a.email})]})]}),(0,t.jsxs)("div",{className:"profile-stats",children:[(0,t.jsxs)("div",{className:"stat",children:[t.jsx("span",{className:"stat-label",children:"アカウント作成日"}),t.jsx("span",{className:"stat-value",children:a.metadata.creationTime?new Date(a.metadata.creationTime).toLocaleDateString("ja-JP"):"不明"})]}),(0,t.jsxs)("div",{className:"stat",children:[t.jsx("span",{className:"stat-label",children:"最終ログイン"}),t.jsx("span",{className:"stat-value",children:a.metadata.lastSignInTime?new Date(a.metadata.lastSignInTime).toLocaleDateString("ja-JP"):"不明"})]})]}),t.jsx("div",{className:"profile-actions",children:t.jsx("button",{onClick:o,disabled:n,className:"signout-button",children:n?"ログアウト中...":"ログアウト"})})]})]})}):null};s(1184);let d=({size:e="medium"})=>t.jsx("div",{className:`loading-spinner ${e}`,children:t.jsx("div",{className:"spinner"})});s(7657);let c=({card:e,onEdit:a,onDelete:s,onToggleStar:n})=>{let[i,l]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"card-container",children:[(0,t.jsxs)("div",{className:`card ${i?"flipped":""}`,onClick:()=>{l(!i)},children:[t.jsx("div",{className:"card-face front",children:(0,t.jsxs)("div",{className:"card-content",children:[t.jsx("h3",{children:e.word}),e.tags&&e.tags.length>0&&t.jsx("div",{className:"tags",children:e.tags.map((e,a)=>t.jsx("span",{className:"tag",children:e},a))})]})}),t.jsx("div",{className:"card-face back",children:t.jsx("div",{className:"card-content",children:t.jsx("p",{children:e.meaning})})})]}),(0,t.jsxs)("div",{className:"card-actions",children:[t.jsx("button",{className:`star-btn ${e.isStarred?"starred":""}`,onClick:a=>{a.stopPropagation(),n?.(e.id)},children:"★"}),t.jsx("button",{className:"edit-btn",onClick:s=>{s.stopPropagation(),a?.(e)},children:"編集"}),t.jsx("button",{className:"delete-btn",onClick:a=>{a.stopPropagation(),s?.(e.id)},children:"削除"})]})]})};s(677);let u=({card:e,onSave:a,onCancel:s})=>{let[n,i]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[u,g]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{e&&(i(e.word),o(e.meaning),c(e.tags?.join(", ")||""),g(e.isStarred||!1))},[e]),t.jsx("div",{className:"card-form-overlay",children:(0,t.jsxs)("div",{className:"card-form",children:[t.jsx("h2",{children:e?"単語カードを編集":"新しい単語カードを作成"}),(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n.trim()||!l.trim()){alert("単語と意味を入力してください");return}let s=d.split(",").map(e=>e.trim()).filter(e=>e.length>0);a({word:n.trim(),meaning:l.trim(),isStarred:u,...s.length>0&&{tags:s}}),i(""),o(""),c(""),g(!1)},children:[(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"word",children:"単語"}),t.jsx("input",{type:"text",id:"word",value:n,onChange:e=>i(e.target.value),placeholder:"単語を入力",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"meaning",children:"意味"}),t.jsx("textarea",{id:"meaning",value:l,onChange:e=>o(e.target.value),placeholder:"意味を入力",rows:3,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"tags",children:"タグ（カンマ区切り）"}),t.jsx("input",{type:"text",id:"tags",value:d,onChange:e=>c(e.target.value),placeholder:"タグ1, タグ2, タグ3"})]}),t.jsx("div",{className:"form-group checkbox-group",children:(0,t.jsxs)("label",{children:[t.jsx("input",{type:"checkbox",checked:u,onChange:e=>g(e.target.checked)}),"お気に入り"]})}),(0,t.jsxs)("div",{className:"form-actions",children:[t.jsx("button",{type:"button",onClick:s,className:"cancel-btn",children:"キャンセル"}),t.jsx("button",{type:"submit",className:"save-btn",children:e?"更新":"保存"})]})]})]})})};s(4590);let g=({searchQuery:e,onSearchChange:a,sortBy:s,onSortByChange:r,sortOrder:n,onSortOrderChange:i,showStarredOnly:l,onShowStarredOnlyChange:o,selectedTag:d,onSelectedTagChange:c,availableTags:u,totalCards:g,filteredCards:m})=>(0,t.jsxs)("div",{className:"search-filter",children:[t.jsx("div",{className:"search-section",children:(0,t.jsxs)("div",{className:"search-input-container",children:[t.jsx("input",{type:"text",placeholder:"単語や意味で検索...",value:e,onChange:e=>a(e.target.value),className:"search-input"}),e&&t.jsx("button",{className:"clear-search",onClick:()=>a(""),children:"\xd7"})]})}),(0,t.jsxs)("div",{className:"filter-section",children:[(0,t.jsxs)("div",{className:"filter-group",children:[t.jsx("label",{children:"並び順:"}),(0,t.jsxs)("select",{value:s,onChange:e=>r(e.target.value),className:"filter-select",children:[t.jsx("option",{value:"createdAt",children:"作成日"}),t.jsx("option",{value:"updatedAt",children:"更新日"}),t.jsx("option",{value:"alphabetical",children:"アルファベット順"})]}),t.jsx("button",{className:`sort-order-btn ${"desc"===n?"desc":"asc"}`,onClick:()=>i("asc"===n?"desc":"asc"),title:"asc"===n?"昇順":"降順",children:"asc"===n?"↑":"↓"})]}),(0,t.jsxs)("div",{className:"filter-group",children:[t.jsx("label",{children:"タグ:"}),(0,t.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"filter-select",children:[t.jsx("option",{value:"",children:"すべて"}),u.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),t.jsx("div",{className:"filter-group",children:(0,t.jsxs)("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:l,onChange:e=>o(e.target.checked)}),"お気に入りのみ"]})})]}),t.jsx("div",{className:"filter-summary",children:m!==g&&(0,t.jsxs)("span",{className:"filter-result",children:[g,"件中",m,"件を表示"]})})]});s(1550);let m=({currentPage:e,totalPages:a,onPageChange:s,itemsPerPage:r,totalItems:i})=>{if(a<=1)return null;let l=Math.min(e*r,i),o=(()=>{let s=[],t=[],r=Math.max(1,e-2),n=Math.min(a,e+2);for(let e=r;e<=n;e++)s.push(e);return r>2?t.push(1,"..."):2===r&&t.push(1),t.push(...s),n<a-1?t.push("...",a):n===a-1&&t.push(a),t})();return(0,t.jsxs)("div",{className:"pagination-container",children:[(0,t.jsxs)("div",{className:"pagination-info",children:[i,"件中 ",(e-1)*r+1,"-",l,"件を表示"]}),(0,t.jsxs)("div",{className:"pagination",children:[t.jsx("button",{className:"pagination-btn",onClick:()=>s(e-1),disabled:1===e,children:"← 前へ"}),o.map((a,r)=>t.jsx(n().Fragment,{children:"..."===a?t.jsx("span",{className:"pagination-dots",children:"..."}):t.jsx("button",{className:`pagination-btn ${a===e?"active":""}`,onClick:()=>s(a),children:a})},r)),t.jsx("button",{className:"pagination-btn",onClick:()=>s(e+1),disabled:e===a,children:"次へ →"})]})]})};var h=s(9222);let p=[{word:"accomplish",meaning:"達成する、成し遂げる",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"acquire",meaning:"獲得する、身につける",tags:["動詞","ビジネス","TOEIC"]},{word:"adequate",meaning:"適切な、十分な",tags:["形容詞","ビジネス","TOEIC"]},{word:"administrator",meaning:"管理者、運営者",tags:["名詞","ビジネス","TOEIC"]},{word:"agenda",meaning:"議題、予定表",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"allocate",meaning:"割り当てる、配分する",tags:["動詞","ビジネス","TOEIC"]},{word:"annually",meaning:"年に一度、毎年",tags:["副詞","ビジネス","TOEIC"]},{word:"anticipate",meaning:"予期する、期待する",tags:["動詞","ビジネス","TOEIC"]},{word:"assessment",meaning:"評価、査定",tags:["名詞","ビジネス","TOEIC"]},{word:"authentic",meaning:"本物の、信頼できる",tags:["形容詞","ビジネス","TOEIC"]},{word:"budget",meaning:"予算、予算を組む",tags:["名詞","動詞","経済","TOEIC"],isStarred:!0},{word:"commodity",meaning:"商品、日用品",tags:["名詞","経済","TOEIC"]},{word:"comprehensive",meaning:"包括的な、総合的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"consecutive",meaning:"連続した、継続的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"corporate",meaning:"企業の、法人の",tags:["形容詞","ビジネス","TOEIC"],isStarred:!0},{word:"crucial",meaning:"極めて重要な、決定的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"deficit",meaning:"赤字、不足",tags:["名詞","経済","TOEIC"]},{word:"economical",meaning:"経済的な、節約の",tags:["形容詞","経済","TOEIC"]},{word:"eliminate",meaning:"除去する、削除する",tags:["動詞","ビジネス","TOEIC"]},{word:"estimate",meaning:"見積もる、推定する",tags:["動詞","名詞","ビジネス","TOEIC"]},{word:"implement",meaning:"実行する、実施する",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"innovative",meaning:"革新的な、斬新な",tags:["形容詞","技術","TOEIC"]},{word:"maintenance",meaning:"保守、維持管理",tags:["名詞","技術","TOEIC"]},{word:"manufacture",meaning:"製造する、製造業",tags:["動詞","名詞","製造","TOEIC"]},{word:"operational",meaning:"運営の、操作の",tags:["形容詞","ビジネス","TOEIC"]},{word:"procedure",meaning:"手順、手続き",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"productivity",meaning:"生産性、生産力",tags:["名詞","ビジネス","TOEIC"]},{word:"proposal",meaning:"提案、企画書",tags:["名詞","ビジネス","TOEIC"]},{word:"regulation",meaning:"規則、規制",tags:["名詞","ビジネス","TOEIC"]},{word:"revenue",meaning:"収入、歳入",tags:["名詞","経済","TOEIC"],isStarred:!0},{word:"accomplish",meaning:"達成する、完成させる",tags:["動詞","一般","TOEIC"]},{word:"appropriate",meaning:"適切な、ふさわしい",tags:["形容詞","一般","TOEIC"]},{word:"convenience",meaning:"便利さ、都合",tags:["名詞","一般","TOEIC"]},{word:"demonstrate",meaning:"実演する、証明する",tags:["動詞","一般","TOEIC"]},{word:"efficient",meaning:"効率的な、能率的な",tags:["形容詞","ビジネス","TOEIC"],isStarred:!0},{word:"foundation",meaning:"基礎、土台、財団",tags:["名詞","一般","TOEIC"]},{word:"guarantee",meaning:"保証する、保証",tags:["動詞","名詞","ビジネス","TOEIC"]},{word:"household",meaning:"家庭の、世帯",tags:["形容詞","名詞","一般","TOEIC"]},{word:"instruction",meaning:"指示、指導、説明書",tags:["名詞","一般","TOEIC"]},{word:"merchandise",meaning:"商品、品物",tags:["名詞","ビジネス","TOEIC"]},{word:"negotiate",meaning:"交渉する、取り決める",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"obligation",meaning:"義務、責任",tags:["名詞","ビジネス","TOEIC"]},{word:"outstanding",meaning:"優秀な、未払いの",tags:["形容詞","ビジネス","TOEIC"]},{word:"personnel",meaning:"職員、人事",tags:["名詞","ビジネス","TOEIC"]},{word:"priority",meaning:"優先事項、優先権",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"remarkable",meaning:"注目すべき、驚くべき",tags:["形容詞","一般","TOEIC"]},{word:"reputation",meaning:"評判、名声",tags:["名詞","ビジネス","TOEIC"]},{word:"strategy",meaning:"戦略、計画",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"substantial",meaning:"かなりの、実質的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"transportation",meaning:"輸送、交通機関",tags:["名詞","一般","TOEIC"]}],x=()=>p;class j{static getPageItems(e,a,s){let t=(a-1)*s;return e.slice(t,t+s)}static getTotalPages(e,a){return Math.ceil(e/a)}}class v{static filterCards(e,a,s,t){return e.filter(e=>{if(a){let s=a.toLowerCase(),t=e.word.toLowerCase().includes(s),r=e.meaning.toLowerCase().includes(s);if(!t&&!r)return!1}return!!(!s||e.tags&&e.tags.includes(s))&&(!t||!!e.isStarred)})}static sortCards(e,a,s){let t=[...e];return t.sort((e,t)=>{let r=0;switch(a){case"createdAt":r=new Date(e.created_at).getTime()-new Date(t.created_at).getTime();break;case"updatedAt":r=new Date(e.updated_at).getTime()-new Date(t.updated_at).getTime();break;case"alphabetical":r=e.word.toLowerCase().localeCompare(t.word.toLowerCase())}return"asc"===s?r:-r}),t}static getAllTags(e){let a=new Set;return e.forEach(e=>{e.tags&&e.tags.forEach(e=>a.add(e))}),Array.from(a).sort()}}let C=(e={})=>{let{itemsPerPage:a=6}=e,{dataManager:s,isCloudMode:t}=(0,h.B)(),[n,i]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),[u,g]=(0,r.useState)(1),[m,p]=(0,r.useState)(""),[C,w]=(0,r.useState)("createdAt"),[f,b]=(0,r.useState)("desc"),[N,y]=(0,r.useState)(!1),[E,T]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{o(!0),c(null);let e=await s.getAllCards();if(0===e.length){let e=x(),a=await s.createCards(e);i(a)}else i(e)}catch(e){console.error("Error loading cards:",e),c(e instanceof Error?e.message:"Failed to load cards")}finally{o(!1)}})()},[s]);let{filteredCards:S,availableTags:I,displayCards:O,totalPages:k}=(0,r.useMemo)(()=>{let e=v.filterCards(n,m,E,N),s=v.sortCards(e,C,f),t=j.getPageItems(s,u,a),r=j.getTotalPages(s.length,a);return{filteredCards:s,availableTags:v.getAllTags(n),displayCards:t,totalPages:r}},[n,u,a,m,C,f,N,E]);(0,r.useEffect)(()=>{g(1)},[m,E,N,C,f]);let q=async e=>{let a=n.find(a=>a.id===e);if(a)try{let t=await s.updateCard(e,{isStarred:!a.isStarred});i(a=>a.map(a=>a.id===e?t:a))}catch(e){console.error("Error toggling star:",e),c(e instanceof Error?e.message:"Failed to update card")}};return{cards:n,filteredCards:S,displayCards:O,availableTags:I,totalPages:k,loading:l,error:d,isCloudMode:t,currentPage:u,searchQuery:m,sortBy:C,sortOrder:f,showStarredOnly:N,selectedTag:E,itemsPerPage:a,setSearchQuery:p,setSortBy:w,setSortOrder:b,setShowStarredOnly:y,setSelectedTag:T,handlePageChange:e=>{g(e),window.scrollTo({top:0,behavior:"smooth"})},createCard:async e=>{try{let a=await s.createCard(e);i(e=>[a,...e])}catch(e){console.error("Error creating card:",e),c(e instanceof Error?e.message:"Failed to create card")}},updateCard:async(e,a)=>{try{let t=await s.updateCard(e,a);i(a=>a.map(a=>a.id===e?t:a))}catch(e){console.error("Error updating card:",e),c(e instanceof Error?e.message:"Failed to update card")}},deleteCard:async e=>{if(window.confirm("このカードを削除しますか？"))try{await s.deleteCard(e),i(a=>a.filter(a=>a.id!==e))}catch(e){console.error("Error deleting card:",e),c(e instanceof Error?e.message:"Failed to delete card")}},toggleStar:q,loadSampleData:async()=>{if(window.confirm("現在のデータを削除してTOEIC700点レベルのサンプルデータを読み込みますか？"))try{await s.deleteAllCards();let e=x(),a=await s.createCards(e);i(a),g(1)}catch(e){console.error("Error loading sample data:",e),c(e instanceof Error?e.message:"Failed to load sample data")}}}};function w(){let{user:e,loading:a}=(0,i.a)(),[s,n]=(0,r.useState)("signin"),[h,p]=(0,r.useState)(!1),{cards:x,filteredCards:j,displayCards:v,loading:w,error:f,searchQuery:b,setSearchQuery:N,sortBy:y,setSortBy:E,sortOrder:T,setSortOrder:S,selectedTag:I,setSelectedTag:O,showStarredOnly:k,setShowStarredOnly:q,currentPage:P,handlePageChange:A,totalPages:F,createCard:_,updateCard:D,deleteCard:M,toggleStar:B,loadSampleData:L,availableTags:R}=C(),[z,G]=(0,r.useState)(!1),[$,H]=(0,r.useState)(),J=e=>{H(e),G(!0)},U=()=>{G(!1),H(void 0)},Q=async e=>{await _(e),U()},V=async e=>{$&&(await D($.id,e),U())},W=async e=>{window.confirm("この単語カードを削除しますか？")&&await M(e)};return a?t.jsx(d,{}):e?(0,t.jsxs)("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[t.jsx("h1",{children:"単語カードアプリ"}),t.jsx("button",{onClick:()=>p(!h),style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:h?"プロフィールを閉じる":"プロフィール"})]}),h&&t.jsx("div",{style:{marginBottom:"20px"},children:t.jsx(o,{onClose:()=>p(!1)})}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[t.jsx("button",{onClick:()=>{H(void 0),G(!0)},style:{padding:"12px 24px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",marginRight:"10px"},children:"新しい単語カードを追加"}),0===x.length&&t.jsx("button",{onClick:L,style:{padding:"12px 24px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"サンプルデータを読み込み"})]}),z&&t.jsx("div",{style:{marginBottom:"20px"},children:t.jsx(u,{card:$,onSave:$?V:Q,onCancel:U})}),x.length>0&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(g,{searchQuery:b,onSearchChange:N,sortBy:y,onSortByChange:E,sortOrder:T,onSortOrderChange:S,selectedTag:I,onSelectedTagChange:O,showStarredOnly:k,onShowStarredOnlyChange:q,availableTags:R,totalCards:x.length,filteredCards:j.length}),w?t.jsx(d,{}):v.length>0?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",margin:"20px 0"},children:v.map(e=>t.jsx(c,{card:e,onEdit:()=>J(e),onDelete:()=>W(e.id),onToggleStar:()=>B(e.id)},e.id))}),F>1&&t.jsx(m,{currentPage:P,totalPages:F,onPageChange:A,itemsPerPage:6,totalItems:j.length})]}):t.jsx("div",{style:{textAlign:"center",padding:"40px"},children:t.jsx("p",{children:"条件に一致する単語カードが見つかりません。"})})]}),f&&(0,t.jsxs)("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"4px",margin:"20px 0"},children:["エラー: ",f]})]}):(0,t.jsxs)("div",{style:{padding:"20px"},children:[t.jsx("h1",{children:"単語カードアプリ"}),t.jsx("p",{children:"ログインして単語カードの学習を始めましょう"}),t.jsx(l,{mode:s,onToggleMode:()=>{n("signin"===s?"signup":"signin")}})]})}},908:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`/workspace/firebase-word-card-app/app/page.tsx#default`)},3069:()=>{},1184:()=>{},6650:()=>{},677:()=>{},1550:()=>{},4590:()=>{},7657:()=>{}};var a=require("../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[805,728],()=>s(1230));module.exports=t})();