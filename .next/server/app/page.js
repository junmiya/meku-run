(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},6539:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(908),t(7730),t(5866);var a=t(3191),s=t(8716),n=t(7922),i=t.n(n),o=t(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,908)),"/workspace/word-card-app/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7730)),"/workspace/word-card-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/word-card-app/app/page.tsx"],u="/page",g={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},17:(e,r,t)=>{Promise.resolve().then(t.bind(t,3136)),Promise.resolve().then(t.bind(t,5016))},3374:(e,r,t)=>{Promise.resolve().then(t.bind(t,73))},8211:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},73:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>v});var a=t(326),s=t(7577),n=t.n(s),i=t(3136);t(2801);let o=({mode:e,onToggleMode:r})=>{let{signIn:t,signUp:n,signInWithGoogle:o,resetPassword:l,loading:d}=(0,i.a)(),[c,u]=(0,s.useState)(""),[g,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[x,w]=(0,s.useState)(null),[f,C]=(0,s.useState)(null),[v,j]=(0,s.useState)(!1),b=async r=>{if(r.preventDefault(),w(null),C(null),!c.trim()||!g.trim()){w("メールアドレスとパスワードを入力してください");return}if("signup"===e&&!m.trim()){w("氏名を入力してください");return}try{let r;(r="signin"===e?await t(c,g):await n(c,g,{data:{full_name:m}})).error?w(S(r.error.message)):"signup"===e&&r.data.user&&!r.data.session&&C("確認メールを送信しました。メールをチェックして、アカウントを有効化してください。")}catch(e){w("予期しないエラーが発生しました"),console.error("Auth error:",e)}},y=async e=>{if(e.preventDefault(),w(null),C(null),!c.trim()){w("メールアドレスを入力してください");return}try{let e=await l(c);e.error?w(S(e.error.message)):(C("パスワードリセットメールを送信しました"),j(!1))}catch(e){w("予期しないエラーが発生しました"),console.error("Reset password error:",e)}},E=async()=>{try{w(null),console.log("Starting Google OAuth...");let e=await o();console.log("Google OAuth result:",e),e.error?(console.error("Google OAuth error:",e.error),w(S(e.error.message))):e.data.url?(console.log("Redirecting to Google OAuth URL:",e.data.url),window.open(e.data.url,"_self")):(console.log("No URL returned from Google OAuth"),w("Google認証URLの取得に失敗しました"))}catch(e){console.error("Google auth error:",e),w("Google認証でエラーが発生しました")}},S=e=>({"Invalid login credentials":"メールアドレスまたはパスワードが正しくありません","Email not confirmed":"メールアドレスが確認されていません","User already registered":"このメールアドレスは既に登録されています","Password should be at least 6 characters":"パスワードは6文字以上で入力してください","Invalid email":"メールアドレスの形式が正しくありません"})[e]||`エラー: ${e}`;return v?(0,a.jsxs)("div",{className:"auth-form",children:[a.jsx("h2",{children:"パスワードリセット"}),(0,a.jsxs)("form",{onSubmit:y,children:[(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"reset-email",children:"メールアドレス"}),a.jsx("input",{type:"email",id:"reset-email",value:c,onChange:e=>u(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),x&&a.jsx("div",{className:"error-message",children:x}),f&&a.jsx("div",{className:"success-message",children:f}),a.jsx("button",{type:"submit",disabled:d,className:"auth-button",children:d?"リセット中...":"パスワードリセット"}),a.jsx("button",{type:"button",onClick:()=>j(!1),className:"link-button",children:"ログインに戻る"})]})]}):(0,a.jsxs)("div",{className:"auth-form",children:[a.jsx("h2",{children:"signin"===e?"ログイン":"アカウント作成"}),a.jsx("div",{className:"google-auth-section",children:(0,a.jsxs)("button",{type:"button",onClick:E,disabled:d,className:"google-signin-button",children:[(0,a.jsxs)("svg",{className:"google-icon",viewBox:"0 0 24 24",width:"20",height:"20",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Googleで","signin"===e?"ログイン":"登録"]})}),a.jsx("div",{className:"divider",children:a.jsx("span",{children:"または"})}),(0,a.jsxs)("form",{onSubmit:b,children:["signup"===e&&(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"fullName",children:"氏名"}),a.jsx("input",{type:"text",id:"fullName",value:m,onChange:e=>p(e.target.value),placeholder:"氏名を入力",required:!0})]}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"メールアドレス"}),a.jsx("input",{type:"email",id:"email",value:c,onChange:e=>u(e.target.value),placeholder:"メールアドレスを入力",required:!0})]}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"パスワード"}),a.jsx("input",{type:"password",id:"password",value:g,onChange:e=>h(e.target.value),placeholder:"パスワードを入力（6文字以上）",minLength:6,required:!0})]}),x&&a.jsx("div",{className:"error-message",children:x}),f&&a.jsx("div",{className:"success-message",children:f}),a.jsx("button",{type:"submit",disabled:d,className:"auth-button",children:d?"signin"===e?"ログイン中...":"アカウント作成中...":"signin"===e?"ログイン":"アカウント作成"}),(0,a.jsxs)("div",{className:"auth-links",children:["signin"===e&&a.jsx("button",{type:"button",onClick:()=>j(!0),className:"link-button",children:"パスワードを忘れた方"}),a.jsx("button",{type:"button",onClick:r,className:"link-button",children:"signin"===e?"アカウントをお持ちでない方はこちら":"既にアカウントをお持ちの方はこちら"})]})]})]})};t(7621);let l=({onClose:e})=>{let{user:r,signOut:t}=(0,i.a)(),[n,o]=(0,s.useState)(!1),l=async()=>{o(!0);try{await t()}catch(e){console.error("Sign out error:",e),o(!1)}};return r?a.jsx("div",{className:"user-profile-overlay",children:(0,a.jsxs)("div",{className:"user-profile",children:[(0,a.jsxs)("div",{className:"profile-header",children:[a.jsx("h3",{children:"プロフィール"}),a.jsx("button",{onClick:e,className:"close-button",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"profile-content",children:[(0,a.jsxs)("div",{className:"profile-info",children:[a.jsx("div",{className:"avatar",children:r.user_metadata?.avatar_url?a.jsx("img",{src:r.user_metadata.avatar_url,alt:"Avatar"}):a.jsx("div",{className:"avatar-placeholder",children:r.user_metadata?.full_name?.charAt(0)||r.email?.charAt(0)||"?"})}),(0,a.jsxs)("div",{className:"user-details",children:[a.jsx("p",{className:"user-name",children:r.user_metadata?.full_name||"ユーザー"}),a.jsx("p",{className:"user-email",children:r.email})]})]}),(0,a.jsxs)("div",{className:"profile-stats",children:[(0,a.jsxs)("div",{className:"stat",children:[a.jsx("span",{className:"stat-label",children:"アカウント作成日"}),a.jsx("span",{className:"stat-value",children:new Date(r.created_at).toLocaleDateString("ja-JP")})]}),(0,a.jsxs)("div",{className:"stat",children:[a.jsx("span",{className:"stat-label",children:"最終ログイン"}),a.jsx("span",{className:"stat-value",children:r.last_sign_in_at?new Date(r.last_sign_in_at).toLocaleDateString("ja-JP"):"不明"})]})]}),a.jsx("div",{className:"profile-actions",children:a.jsx("button",{onClick:l,disabled:n,className:"signout-button",children:n?"ログアウト中...":"ログアウト"})})]})]})}):null};var d=t(969);t(5116);let c=({card:e,onEdit:r,onDelete:t,onToggleStar:n})=>{let[i,o]=(0,s.useState)(!1);return(0,a.jsxs)("div",{className:"card-container",children:[(0,a.jsxs)("div",{className:`card ${i?"flipped":""}`,onClick:()=>{o(!i)},children:[a.jsx("div",{className:"card-face front",children:(0,a.jsxs)("div",{className:"card-content",children:[a.jsx("h3",{children:e.word}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"tags",children:e.tags.map((e,r)=>a.jsx("span",{className:"tag",children:e},r))})]})}),a.jsx("div",{className:"card-face back",children:a.jsx("div",{className:"card-content",children:a.jsx("p",{children:e.meaning})})})]}),(0,a.jsxs)("div",{className:"card-actions",children:[a.jsx("button",{className:`star-btn ${e.isStarred?"starred":""}`,onClick:r=>{r.stopPropagation(),n?.(e.id)},children:"★"}),a.jsx("button",{className:"edit-btn",onClick:t=>{t.stopPropagation(),r?.(e)},children:"編集"}),a.jsx("button",{className:"delete-btn",onClick:r=>{r.stopPropagation(),t?.(e.id)},children:"削除"})]})]})};t(7456);let u=({card:e,onSave:r,onCancel:t})=>{let[n,i]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[u,g]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{e&&(i(e.word),l(e.meaning),c(e.tags?.join(", ")||""),g(e.isStarred||!1))},[e]),a.jsx("div",{className:"card-form-overlay",children:(0,a.jsxs)("div",{className:"card-form",children:[a.jsx("h2",{children:e?"単語カードを編集":"新しい単語カードを作成"}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n.trim()||!o.trim()){alert("単語と意味を入力してください");return}let t=d.split(",").map(e=>e.trim()).filter(e=>e.length>0);r({word:n.trim(),meaning:o.trim(),isStarred:u,...t.length>0&&{tags:t}}),i(""),l(""),c(""),g(!1)},children:[(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"word",children:"単語"}),a.jsx("input",{type:"text",id:"word",value:n,onChange:e=>i(e.target.value),placeholder:"単語を入力",required:!0})]}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"meaning",children:"意味"}),a.jsx("textarea",{id:"meaning",value:o,onChange:e=>l(e.target.value),placeholder:"意味を入力",rows:3,required:!0})]}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"tags",children:"タグ（カンマ区切り）"}),a.jsx("input",{type:"text",id:"tags",value:d,onChange:e=>c(e.target.value),placeholder:"タグ1, タグ2, タグ3"})]}),a.jsx("div",{className:"form-group checkbox-group",children:(0,a.jsxs)("label",{children:[a.jsx("input",{type:"checkbox",checked:u,onChange:e=>g(e.target.checked)}),"お気に入り"]})}),(0,a.jsxs)("div",{className:"form-actions",children:[a.jsx("button",{type:"button",onClick:t,className:"cancel-btn",children:"キャンセル"}),a.jsx("button",{type:"submit",className:"save-btn",children:e?"更新":"保存"})]})]})]})})};t(3449);let g=({searchQuery:e,onSearchChange:r,sortBy:t,onSortByChange:s,sortOrder:n,onSortOrderChange:i,showStarredOnly:o,onShowStarredOnlyChange:l,selectedTag:d,onSelectedTagChange:c,availableTags:u,totalCards:g,filteredCards:h})=>(0,a.jsxs)("div",{className:"search-filter",children:[a.jsx("div",{className:"search-section",children:(0,a.jsxs)("div",{className:"search-input-container",children:[a.jsx("input",{type:"text",placeholder:"単語や意味で検索...",value:e,onChange:e=>r(e.target.value),className:"search-input"}),e&&a.jsx("button",{className:"clear-search",onClick:()=>r(""),children:"\xd7"})]})}),(0,a.jsxs)("div",{className:"filter-section",children:[(0,a.jsxs)("div",{className:"filter-group",children:[a.jsx("label",{children:"並び順:"}),(0,a.jsxs)("select",{value:t,onChange:e=>s(e.target.value),className:"filter-select",children:[a.jsx("option",{value:"createdAt",children:"作成日"}),a.jsx("option",{value:"updatedAt",children:"更新日"}),a.jsx("option",{value:"alphabetical",children:"アルファベット順"})]}),a.jsx("button",{className:`sort-order-btn ${"desc"===n?"desc":"asc"}`,onClick:()=>i("asc"===n?"desc":"asc"),title:"asc"===n?"昇順":"降順",children:"asc"===n?"↑":"↓"})]}),(0,a.jsxs)("div",{className:"filter-group",children:[a.jsx("label",{children:"タグ:"}),(0,a.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"filter-select",children:[a.jsx("option",{value:"",children:"すべて"}),u.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),a.jsx("div",{className:"filter-group",children:(0,a.jsxs)("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:o,onChange:e=>l(e.target.checked)}),"お気に入りのみ"]})})]}),a.jsx("div",{className:"filter-summary",children:h!==g&&(0,a.jsxs)("span",{className:"filter-result",children:[g,"件中",h,"件を表示"]})})]});t(6832);let h=({currentPage:e,totalPages:r,onPageChange:t,itemsPerPage:s,totalItems:i})=>{if(r<=1)return null;let o=Math.min(e*s,i),l=(()=>{let t=[],a=[],s=Math.max(1,e-2),n=Math.min(r,e+2);for(let e=s;e<=n;e++)t.push(e);return s>2?a.push(1,"..."):2===s&&a.push(1),a.push(...t),n<r-1?a.push("...",r):n===r-1&&a.push(r),a})();return(0,a.jsxs)("div",{className:"pagination-container",children:[(0,a.jsxs)("div",{className:"pagination-info",children:[i,"件中 ",(e-1)*s+1,"-",o,"件を表示"]}),(0,a.jsxs)("div",{className:"pagination",children:[a.jsx("button",{className:"pagination-btn",onClick:()=>t(e-1),disabled:1===e,children:"← 前へ"}),l.map((r,s)=>a.jsx(n().Fragment,{children:"..."===r?a.jsx("span",{className:"pagination-dots",children:"..."}):a.jsx("button",{className:`pagination-btn ${r===e?"active":""}`,onClick:()=>t(r),children:r})},s)),a.jsx("button",{className:"pagination-btn",onClick:()=>t(e+1),disabled:e===r,children:"次へ →"})]})]})};var m=t(5016);let p=[{word:"accomplish",meaning:"達成する、成し遂げる",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"acquire",meaning:"獲得する、身につける",tags:["動詞","ビジネス","TOEIC"]},{word:"adequate",meaning:"適切な、十分な",tags:["形容詞","ビジネス","TOEIC"]},{word:"administrator",meaning:"管理者、運営者",tags:["名詞","ビジネス","TOEIC"]},{word:"agenda",meaning:"議題、予定表",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"allocate",meaning:"割り当てる、配分する",tags:["動詞","ビジネス","TOEIC"]},{word:"annually",meaning:"年に一度、毎年",tags:["副詞","ビジネス","TOEIC"]},{word:"anticipate",meaning:"予期する、期待する",tags:["動詞","ビジネス","TOEIC"]},{word:"assessment",meaning:"評価、査定",tags:["名詞","ビジネス","TOEIC"]},{word:"authentic",meaning:"本物の、信頼できる",tags:["形容詞","ビジネス","TOEIC"]},{word:"budget",meaning:"予算、予算を組む",tags:["名詞","動詞","経済","TOEIC"],isStarred:!0},{word:"commodity",meaning:"商品、日用品",tags:["名詞","経済","TOEIC"]},{word:"comprehensive",meaning:"包括的な、総合的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"consecutive",meaning:"連続した、継続的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"corporate",meaning:"企業の、法人の",tags:["形容詞","ビジネス","TOEIC"],isStarred:!0},{word:"crucial",meaning:"極めて重要な、決定的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"deficit",meaning:"赤字、不足",tags:["名詞","経済","TOEIC"]},{word:"economical",meaning:"経済的な、節約の",tags:["形容詞","経済","TOEIC"]},{word:"eliminate",meaning:"除去する、削除する",tags:["動詞","ビジネス","TOEIC"]},{word:"estimate",meaning:"見積もる、推定する",tags:["動詞","名詞","ビジネス","TOEIC"]},{word:"implement",meaning:"実行する、実施する",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"innovative",meaning:"革新的な、斬新な",tags:["形容詞","技術","TOEIC"]},{word:"maintenance",meaning:"保守、維持管理",tags:["名詞","技術","TOEIC"]},{word:"manufacture",meaning:"製造する、製造業",tags:["動詞","名詞","製造","TOEIC"]},{word:"operational",meaning:"運営の、操作の",tags:["形容詞","ビジネス","TOEIC"]},{word:"procedure",meaning:"手順、手続き",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"productivity",meaning:"生産性、生産力",tags:["名詞","ビジネス","TOEIC"]},{word:"proposal",meaning:"提案、企画書",tags:["名詞","ビジネス","TOEIC"]},{word:"regulation",meaning:"規則、規制",tags:["名詞","ビジネス","TOEIC"]},{word:"revenue",meaning:"収入、歳入",tags:["名詞","経済","TOEIC"],isStarred:!0},{word:"accomplish",meaning:"達成する、完成させる",tags:["動詞","一般","TOEIC"]},{word:"appropriate",meaning:"適切な、ふさわしい",tags:["形容詞","一般","TOEIC"]},{word:"convenience",meaning:"便利さ、都合",tags:["名詞","一般","TOEIC"]},{word:"demonstrate",meaning:"実演する、証明する",tags:["動詞","一般","TOEIC"]},{word:"efficient",meaning:"効率的な、能率的な",tags:["形容詞","ビジネス","TOEIC"],isStarred:!0},{word:"foundation",meaning:"基礎、土台、財団",tags:["名詞","一般","TOEIC"]},{word:"guarantee",meaning:"保証する、保証",tags:["動詞","名詞","ビジネス","TOEIC"]},{word:"household",meaning:"家庭の、世帯",tags:["形容詞","名詞","一般","TOEIC"]},{word:"instruction",meaning:"指示、指導、説明書",tags:["名詞","一般","TOEIC"]},{word:"merchandise",meaning:"商品、品物",tags:["名詞","ビジネス","TOEIC"]},{word:"negotiate",meaning:"交渉する、取り決める",tags:["動詞","ビジネス","TOEIC"],isStarred:!0},{word:"obligation",meaning:"義務、責任",tags:["名詞","ビジネス","TOEIC"]},{word:"outstanding",meaning:"優秀な、未払いの",tags:["形容詞","ビジネス","TOEIC"]},{word:"personnel",meaning:"職員、人事",tags:["名詞","ビジネス","TOEIC"]},{word:"priority",meaning:"優先事項、優先権",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"remarkable",meaning:"注目すべき、驚くべき",tags:["形容詞","一般","TOEIC"]},{word:"reputation",meaning:"評判、名声",tags:["名詞","ビジネス","TOEIC"]},{word:"strategy",meaning:"戦略、計画",tags:["名詞","ビジネス","TOEIC"],isStarred:!0},{word:"substantial",meaning:"かなりの、実質的な",tags:["形容詞","ビジネス","TOEIC"]},{word:"transportation",meaning:"輸送、交通機関",tags:["名詞","一般","TOEIC"]}],x=()=>p;class w{static getPageItems(e,r,t){let a=(r-1)*t;return e.slice(a,a+t)}static getTotalPages(e,r){return Math.ceil(e/r)}}class f{static filterCards(e,r,t,a){return e.filter(e=>{if(r){let t=r.toLowerCase(),a=e.word.toLowerCase().includes(t),s=e.meaning.toLowerCase().includes(t);if(!a&&!s)return!1}return!!(!t||e.tags&&e.tags.includes(t))&&(!a||!!e.isStarred)})}static sortCards(e,r,t){let a=[...e];return a.sort((e,a)=>{let s=0;switch(r){case"createdAt":s=new Date(e.created_at).getTime()-new Date(a.created_at).getTime();break;case"updatedAt":s=new Date(e.updated_at).getTime()-new Date(a.updated_at).getTime();break;case"alphabetical":s=e.word.toLowerCase().localeCompare(a.word.toLowerCase())}return"asc"===t?s:-s}),a}static getAllTags(e){let r=new Set;return e.forEach(e=>{e.tags&&e.tags.forEach(e=>r.add(e))}),Array.from(r).sort()}}let C=(e={})=>{let{itemsPerPage:r=6}=e,{dataManager:t,isCloudMode:a}=(0,m.B)(),[n,i]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0),[d,c]=(0,s.useState)(null),[u,g]=(0,s.useState)(1),[h,p]=(0,s.useState)(""),[C,v]=(0,s.useState)("createdAt"),[j,b]=(0,s.useState)("desc"),[y,E]=(0,s.useState)(!1),[S,N]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{l(!0),c(null);let e=await t.getAllCards();if(0===e.length){let e=x(),r=await t.createCards(e);i(r)}else i(e)}catch(e){console.error("Error loading cards:",e),c(e instanceof Error?e.message:"Failed to load cards")}finally{l(!1)}})()},[t]);let{filteredCards:T,availableTags:O,displayCards:I,totalPages:_}=(0,s.useMemo)(()=>{let e=f.filterCards(n,h,S,y),t=f.sortCards(e,C,j),a=w.getPageItems(t,u,r),s=w.getTotalPages(t.length,r);return{filteredCards:t,availableTags:f.getAllTags(n),displayCards:a,totalPages:s}},[n,u,r,h,C,j,y,S]);(0,s.useEffect)(()=>{g(1)},[h,S,y,C,j]);let P=async e=>{let r=n.find(r=>r.id===e);if(r)try{let a=await t.updateCard(e,{isStarred:!r.isStarred});i(r=>r.map(r=>r.id===e?a:r))}catch(e){console.error("Error toggling star:",e),c(e instanceof Error?e.message:"Failed to update card")}};return{cards:n,filteredCards:T,displayCards:I,availableTags:O,totalPages:_,loading:o,error:d,isCloudMode:a,currentPage:u,searchQuery:h,sortBy:C,sortOrder:j,showStarredOnly:y,selectedTag:S,itemsPerPage:r,setSearchQuery:p,setSortBy:v,setSortOrder:b,setShowStarredOnly:E,setSelectedTag:N,handlePageChange:e=>{g(e),window.scrollTo({top:0,behavior:"smooth"})},createCard:async e=>{try{let r=await t.createCard(e);i(e=>[r,...e])}catch(e){console.error("Error creating card:",e),c(e instanceof Error?e.message:"Failed to create card")}},updateCard:async(e,r)=>{try{let a=await t.updateCard(e,r);i(r=>r.map(r=>r.id===e?a:r))}catch(e){console.error("Error updating card:",e),c(e instanceof Error?e.message:"Failed to update card")}},deleteCard:async e=>{if(window.confirm("このカードを削除しますか？"))try{await t.deleteCard(e),i(r=>r.filter(r=>r.id!==e))}catch(e){console.error("Error deleting card:",e),c(e instanceof Error?e.message:"Failed to delete card")}},toggleStar:P,loadSampleData:async()=>{if(window.confirm("現在のデータを削除してTOEIC700点レベルのサンプルデータを読み込みますか？"))try{await t.deleteAllCards();let e=x(),r=await t.createCards(e);i(r),g(1)}catch(e){console.error("Error loading sample data:",e),c(e instanceof Error?e.message:"Failed to load sample data")}}}};function v(){let{user:e,loading:r}=(0,i.a)(),[t,n]=(0,s.useState)("signin"),[m,p]=(0,s.useState)(!1),{cards:x,filteredCards:w,displayCards:f,loading:v,error:j,searchQuery:b,setSearchQuery:y,sortBy:E,setSortBy:S,sortOrder:N,setSortOrder:T,selectedTag:O,setSelectedTag:I,showStarredOnly:_,setShowStarredOnly:P,currentPage:A,handlePageChange:k,totalPages:q,createCard:F,updateCard:D,deleteCard:M,toggleStar:$,loadSampleData:G,availableTags:L}=C(),[R,U]=(0,s.useState)(!1),[B,z]=(0,s.useState)(),J=e=>{z(e),U(!0)},H=()=>{U(!1),z(void 0)},W=async e=>{await F(e),H()},Z=async e=>{B&&(await D(B.id,e),H())},Q=async e=>{window.confirm("この単語カードを削除しますか？")&&await M(e)};return r?a.jsx(d.Z,{}):e?(0,a.jsxs)("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[a.jsx("h1",{children:"単語カードアプリ"}),a.jsx("button",{onClick:()=>p(!m),style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:m?"プロフィールを閉じる":"プロフィール"})]}),m&&a.jsx("div",{style:{marginBottom:"20px"},children:a.jsx(l,{onClose:()=>p(!1)})}),(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[a.jsx("button",{onClick:()=>{z(void 0),U(!0)},style:{padding:"12px 24px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",marginRight:"10px"},children:"新しい単語カードを追加"}),0===x.length&&a.jsx("button",{onClick:G,style:{padding:"12px 24px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},children:"サンプルデータを読み込み"})]}),R&&a.jsx("div",{style:{marginBottom:"20px"},children:a.jsx(u,{card:B,onSave:B?Z:W,onCancel:H})}),x.length>0&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(g,{searchQuery:b,onSearchChange:y,sortBy:E,onSortByChange:S,sortOrder:N,onSortOrderChange:T,selectedTag:O,onSelectedTagChange:I,showStarredOnly:_,onShowStarredOnlyChange:P,availableTags:L,totalCards:x.length,filteredCards:w.length}),v?a.jsx(d.Z,{}):f.length>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",margin:"20px 0"},children:f.map(e=>a.jsx(c,{card:e,onEdit:()=>J(e),onDelete:()=>Q(e.id),onToggleStar:()=>$(e.id)},e.id))}),q>1&&a.jsx(h,{currentPage:A,totalPages:q,onPageChange:k,itemsPerPage:6,totalItems:w.length})]}):a.jsx("div",{style:{textAlign:"center",padding:"40px"},children:a.jsx("p",{children:"条件に一致する単語カードが見つかりません。"})})]}),j&&(0,a.jsxs)("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"4px",margin:"20px 0"},children:["エラー: ",j]})]}):(0,a.jsxs)("div",{style:{padding:"20px"},children:[a.jsx("h1",{children:"単語カードアプリ"}),a.jsx("p",{children:"ログインして単語カードの学習を始めましょう"}),a.jsx(o,{mode:t,onToggleMode:()=>{n("signin"===t?"signup":"signin")}})]})}},969:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});var a=t(326);t(7577),t(4296);let s=({size:e="medium"})=>a.jsx("div",{className:`loading-spinner ${e}`,children:a.jsx("div",{className:"spinner"})})},3136:(e,r,t)=>{"use strict";t.d(r,{AuthProvider:()=>l,a:()=>o});var a=t(326),s=t(7577),n=t(5442);let i=(0,s.createContext)(void 0),o=()=>{let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=({children:e})=>{let[r,t]=(0,s.useState)(null),[o,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),u=(0,n.e)();(0,s.useEffect)(()=>{(async()=>{let{data:{session:e},error:r}=await u.auth.getSession();r?console.error("Error getting session:",r):(l(e),t(e?.user??null)),c(!1)})();let{data:{subscription:e}}=u.auth.onAuthStateChange(async(e,r)=>{console.log("Auth state changed:",e,r),l(r),t(r?.user??null),c(!1),"SIGNED_IN"===e&&r?.user&&await g(r.user)});return()=>e.unsubscribe()},[]);let g=async e=>{try{let{error:r}=await u.from("user_profiles").upsert([{id:e.id,full_name:e.user_metadata?.full_name||null,avatar_url:e.user_metadata?.avatar_url||null,updated_at:new Date().toISOString()}]);r&&console.error("Error updating profile:",r)}catch(e){console.error("Error in createOrUpdateProfile:",e)}},h=async(e,r,t)=>{c(!0);try{return await u.auth.signUp({email:e,password:r,...t&&{options:t}})}finally{c(!1)}},m=async(e,r)=>{c(!0);try{return await u.auth.signInWithPassword({email:e,password:r})}finally{c(!1)}},p=async()=>{c(!0);try{let{error:e}=await u.auth.signOut();if(e)throw e}finally{c(!1)}},x=async e=>await u.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`}),w=async()=>{let e=`${window.location.origin}/auth/callback`;return await u.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}})};return a.jsx(i.Provider,{value:{user:r,session:o,loading:d,signUp:h,signIn:m,signInWithGoogle:w,signOut:p,resetPassword:x},children:e})}},5016:(e,r,t)=>{"use strict";t.d(r,{DataManagerProvider:()=>u,B:()=>g});var a=t(326),s=t(7577);let n="wordCards";class i{generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}getCurrentTimestamp(){return new Date().toISOString()}getStoredCards(){try{let e=localStorage.getItem(n);return e?JSON.parse(e):[]}catch(e){return console.error("Error reading from localStorage:",e),[]}}saveCards(e){try{localStorage.setItem(n,JSON.stringify(e))}catch(e){throw console.error("Error saving to localStorage:",e),Error("Failed to save data to local storage")}}async getAllCards(){return this.getStoredCards()}async getCard(e){return this.getStoredCards().find(r=>r.id===e)||null}async createCard(e){let r=this.getStoredCards(),t=this.getCurrentTimestamp(),a={...e,id:this.generateId(),created_at:t,updated_at:t};return r.push(a),this.saveCards(r),a}async updateCard(e,r){let t=this.getStoredCards(),a=t.findIndex(r=>r.id===e);if(-1===a)throw Error(`Card with id ${e} not found`);let s=t[a],n={...s,...r,updated_at:this.getCurrentTimestamp(),id:s.id,word:r.word??s.word,meaning:r.meaning??s.meaning,created_at:s.created_at};return t[a]=n,this.saveCards(t),n}async deleteCard(e){let r=this.getStoredCards(),t=r.filter(r=>r.id!==e);if(t.length===r.length)throw Error(`Card with id ${e} not found`);this.saveCards(t)}async createCards(e){let r=this.getStoredCards(),t=this.getCurrentTimestamp(),a=e.map(e=>({...e,id:this.generateId(),created_at:t,updated_at:t}));return r.push(...a),this.saveCards(r),a}async deleteAllCards(){this.saveCards([])}isOffline(){return!0}}var o=t(5442);class l{constructor(e=null){this.user=null,this.supabase=(0,o.e)(),this.user=e}setUser(e){this.user=e}ensureAuthenticated(){if(!this.user)throw Error("User must be authenticated to use SupabaseManager")}async getAllCards(){this.ensureAuthenticated();let{data:e,error:r}=await this.supabase.from("word_cards").select("*").eq("user_id",this.user.id).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching cards from Supabase:",r),Error(`Failed to fetch cards: ${r.message}`);return e||[]}async getCard(e){this.ensureAuthenticated();let{data:r,error:t}=await this.supabase.from("word_cards").select("*").eq("id",e).eq("user_id",this.user.id).single();if(t){if("PGRST116"===t.code)return null;throw console.error("Error fetching card from Supabase:",t),Error(`Failed to fetch card: ${t.message}`)}return r}async createCard(e){this.ensureAuthenticated();let{data:r,error:t}=await this.supabase.from("word_cards").insert([{...e,user_id:this.user.id}]).select().single();if(t)throw console.error("Error creating card in Supabase:",t),Error(`Failed to create card: ${t.message}`);return r}async updateCard(e,r){this.ensureAuthenticated();let{data:t,error:a}=await this.supabase.from("word_cards").update({...r,updated_at:new Date().toISOString()}).eq("id",e).eq("user_id",this.user.id).select().single();if(a)throw console.error("Error updating card in Supabase:",a),Error(`Failed to update card: ${a.message}`);if(!t)throw Error(`Card with id ${e} not found`);return t}async deleteCard(e){this.ensureAuthenticated();let{error:r}=await this.supabase.from("word_cards").delete().eq("id",e).eq("user_id",this.user.id);if(r)throw console.error("Error deleting card from Supabase:",r),Error(`Failed to delete card: ${r.message}`)}async createCards(e){this.ensureAuthenticated();let r=e.map(e=>({...e,user_id:this.user.id})),{data:t,error:a}=await this.supabase.from("word_cards").insert(r).select();if(a)throw console.error("Error creating cards in Supabase:",a),Error(`Failed to create cards: ${a.message}`);return t||[]}async deleteAllCards(){this.ensureAuthenticated();let{error:e}=await this.supabase.from("word_cards").delete().eq("user_id",this.user.id);if(e)throw console.error("Error deleting all cards from Supabase:",e),Error(`Failed to delete all cards: ${e.message}`)}async syncData(){this.ensureAuthenticated();try{return await this.getAllCards(),{success:!0}}catch(e){return console.error("Error syncing data:",e),{success:!1,errors:[e instanceof Error?e:Error("Unknown sync error")]}}}isOffline(){return!navigator.onLine}async migrateFromLocalStorage(e){this.ensureAuthenticated();try{let r=await this.getAllCards(),t=new Set(r.map(e=>e.id)),a=e.filter(e=>!t.has(e.id));if(0===a.length)return{success:!0};let s=a.map(({id:e,created_at:r,updated_at:t,...a})=>a);return await this.createCards(s),{success:!0}}catch(e){return console.error("Error migrating from localStorage:",e),{success:!1,errors:[e instanceof Error?e:Error("Migration failed")]}}}}var d=t(3136);let c=(0,s.createContext)(void 0),u=({children:e})=>{let{user:r,loading:t}=(0,d.a)(),[n,o]=(0,s.useState)(new i),[u,g]=(0,s.useState)(!1),[h]=(0,s.useState)(new l);(0,s.useEffect)(()=>{t||(r?(h.setUser(r),o(h),g(!0)):(o(new i),g(!1)))},[r,t,h]);let m=async()=>{if(!r)throw Error("User must be authenticated to switch to cloud mode");h.setUser(r),o(h),g(!0)},p=async()=>{if(!r)return console.error("Cannot migrate to cloud: user not authenticated"),!1;try{let e=new i,r=await e.getAllCards();if(0===r.length)return!0;let t=await h.migrateFromLocalStorage(r);if(t.success)return console.log(`Successfully migrated ${r.length} cards to cloud`),!0;return console.error("Migration failed:",t.errors),!1}catch(e){return console.error("Error during migration:",e),!1}};return a.jsx(c.Provider,{value:{dataManager:n,isCloudMode:u,switchToCloud:m,switchToLocal:()=>{o(new i),g(!1)},migrateToCloud:p},children:e})},g=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useDataManager must be used within a DataManagerProvider");return e}},5442:(e,r,t)=>{"use strict";t.d(r,{e:()=>s});var a=t(9813);let s=()=>(0,a.createClientComponentClient)();(0,a.createClientComponentClient)()},7730:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l,metadata:()=>o});var a=t(9510),s=t(8570);(0,s.createProxy)(String.raw`/workspace/word-card-app/contexts/AuthContext.tsx#useAuth`);let n=(0,s.createProxy)(String.raw`/workspace/word-card-app/contexts/AuthContext.tsx#AuthProvider`),i=(0,s.createProxy)(String.raw`/workspace/word-card-app/contexts/DataManagerContext.tsx#DataManagerProvider`);(0,s.createProxy)(String.raw`/workspace/word-card-app/contexts/DataManagerContext.tsx#useDataManager`),t(7272);let o={title:"単語カードアプリ",description:"Google認証対応の単語学習アプリ"};function l({children:e}){return a.jsx("html",{lang:"ja",children:a.jsx("body",{children:a.jsx(n,{children:a.jsx(i,{children:e})})})})}},908:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/workspace/word-card-app/app/page.tsx#default`)},7272:()=>{},2801:()=>{},4296:()=>{},7621:()=>{},7456:()=>{},6832:()=>{},3449:()=>{},5116:()=>{}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[534],()=>t(6539));module.exports=a})();